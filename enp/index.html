<!DOCTYPE html>
<html lang="en">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
      <title>EME Noise Mapper</title>
      <style>
          body{margin:0;overflow:hidden;width:100%;height:100vh;background:#000}canvas{display:block;position:absolute;top:0;left:0;width:100%;height:100%}html,body{touch-action:none;width:100%;height:100%}button{min-width:44px;min-height:44px}#infoBox{position:absolute;top:10px;right:10px;left:auto;padding:10px;background:rgb(0 0 0 / .7);color:#fff;font-family:monospace;font-size:12px;display:none;max-width:80vw;z-index:10;text-align:right;width:fit-content}@media (max-width:600px),(orientation:portrait){#infoBox{font-size:14px;padding:16px;top:15px;right:15px;left:auto;text-align:right;width:fit-content;max-width:90vw;line-height:1.4}}#moonTimeControls button{background:rgb(255 255 255 / .1);border:1px solid rgb(255 255 255 / .3);border-radius:12px;color:#fff;font-size:24px;font-family:sans-serif;padding:10px 20px;cursor:pointer;transition:background 0.2s,transform 0.2s;box-shadow:0 4px 8px rgb(0 0 0 / .3)}#trackButton{background:rgb(255 255 255 / .1);border:1px solid rgb(255 255 255 / .3);border-radius:12px;color:#fff;font-size:24px;font-family:sans-serif;padding:10px 20px;cursor:pointer;transition:background 0.2s,transform 0.2s;box-shadow:0 4px 8px rgb(0 0 0 / .3)}#moonTimeControls button:hover,#trackButton:hover{background:rgb(255 255 255 / .2);transform:scale(1.05)}#moonTimeControls button:active,#trackButton:active{background:rgb(255 255 255 / .3);transform:scale(.97)}#trackButton:disabled{opacity:.5;cursor:not-allowed}#moonTimeControls{position:absolute;bottom:10px;left:50%;transform:translateX(-50%);z-index:20;display:flex;flex-direction:column;align-items:center;gap:10px}#moonTimeDisplay{color:#fff;font-family:'Courier New',monospace;font-size:20px;padding:8px 12px;border-radius:8px;background-color:rgb(0 0 0 / .4);border:1px solid rgb(255 255 255 / .2)}#prevDate,#nextDate{padding:1px 6px;font-size:10px;line-height:1.2;min-height:20px;width:24px;border-radius:4px;background:#444;color:#fff;border:none;cursor:pointer;transition:background 0.2s,transform 0.2s}#prevDate:hover,#nextDate:hover{background:rgb(255 255 255 / .2);transform:scale(1.05)}#prevDate:active,#nextDate:active{background:rgb(255 255 255 / .3);transform:scale(.97)}#timeSlider{-webkit-appearance:none;appearance:none;background:rgb(255 255 255 / .3);height:12px;border-radius:6px;outline:none;width:80vw;max-width:300px;touch-action:pan-x;z-index:30}#timeSlider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:24px;height:24px;background:#fff;border-radius:50%;cursor:pointer;box-shadow:0 2px 4px rgb(0 0 0 / .3)}#timeSlider::-moz-range-thumb{width:24px;height:24px;background:#fff;border-radius:50%;cursor:pointer;box-shadow:0 2px 4px rgb(0 0 0 / .3)}#timeSlider:disabled{opacity:.5;cursor:not-allowed}#colorBarContainer{position:absolute;bottom:180px;right:10px;z-index:30;display:flex;flex-direction:column;align-items:center;font-family:'Segoe UI',sans-serif;font-size:12px;color:#fff;width:40px;height:auto;top:auto;left:auto}#colorBar{width:20px!important;height:100px!important;border:1px solid rgb(255 255 255 / .3);z-index:30}#maxNoiseLabel{position:absolute;top:-18px;left:50%;transform:translateX(-50%);text-align:center;width:100%;z-index:31;background:rgb(0 0 0 / .6);padding:2px 4px;border-radius:2px;line-height:1.2}#minNoiseLabel{position:absolute;bottom:-18px;left:50%;transform:translateX(-50%);text-align:center;width:100%;z-index:31;background:rgb(0 0 0 / .6);padding:2px 4px;border-radius:2px;line-height:1.2}@media (max-width:600px),(orientation:portrait){#colorBarContainer{position:absolute;bottom:90px;right:10px;font-size:10px;width:40px;height:auto;top:auto;left:auto}#colorBar{width:20px!important;height:120px!important}#maxNoiseLabel{top:-16px;font-size:10px;padding:1px 3px}#minNoiseLabel{bottom:-16px;font-size:10px;padding:1px 3px}}@media (max-height:500px){#colorBarContainer{position:absolute;bottom:80px;righ t:10px;width:40px;height:auto;top:auto;left:auto}#colorBar{height:100px!important}#maxNoiseLabel{top:-16px;font-size:10px;padding:1px 3px}#minNoiseLabel{bottom:-16px;font-size:10px;padding:1px 3px}}
      </style>
    </head>
    <body>
        <div style="position: absolute; top: 8px; left: 8px; z-index: 30; font-family: 'Segoe UI', sans-serif;">
          <div style="display: flex; flex-direction: row; align-items: flex-end; gap: 8px;">
            <div style="display: flex; flex-direction: column; align-items: flex-end; line-height: 1;">
              <div style="font-size: 10px; color: #aaa; padding-right: 2px;">
                by SA5IKN
              </div>
              <div style="font-size: 16px; color: white; font-weight: 600; background: rgba(0, 0, 0, 0.6); padding: 2px 4px; border-radius: 2px;">
                EME Noise Mapper
              </div>
            </div>
            <div style="display: flex; flex-direction: row; gap: 4px;">
                <a href="https://dxer.site" target="_blank" title="Go to homepage"
                   style="
                     display: inline-flex;
                     align-items: center;
                     justify-content: center;
                     width: 32px;
                     height: 32px;
                     background: rgba(255,255,255,0.1);
                     color: white;
                     border-radius: 6px;
                     text-decoration: none;
                     transition: background 0.2s ease;
                   ">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="white">
                    <path d="M12 3l9 9h-3v9h-12v-9h-3l9-9z"/>
                  </svg>
                </a>

                <a href="https://dxer.site/eme-observer/" target="_blank" title="EME Observer"
                   style="
                     display: inline-flex;
                     align-items: center;
                     justify-content: center;
                     width: 32px;
                     height: 32px;
                     background: rgba(255,255,255,0.1);
                     color: white;
                     border-radius: 6px;
                     text-decoration: none;
                     transition: background 0.2s ease;
                   "
                   onmouseover="this.style.background='rgba(255,255,255,0.25)'"
                   onmouseout="this.style.background='rgba(255,255,255,0.1)'">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="white">
                    <path d="M15 4l-6 2-6-2v16l6 2 6-2 6 2v-16l-6-2zm0 2.47l4 .8v12.26l-4-.8v-12.26zm-6 12.26l-4-.8v-12.26l4 .8v12.26zm2-.37v-12.72l2-.67v12.72l-2 .67z"/>
                  </svg>
                </a>

                <a href="https://dxer.site/eme-noise-mapper/user-guide.html" target="_blank" title="Help"
                   style="
                     display: inline-flex;
                     align-items: center;
                     justify-content: center;
                     width: 32px;
                     height: 32px;
                     background: rgba(255,255,255,0.1);
                     color: white;
                     border-radius: 6px;
                     text-decoration: none;
                     transition: background 0.2s ease;
                   "
                   onmouseover="this.style.background='rgba(255,255,255,0.25)'"
                   onmouseout="this.style.background='rgba(255,255,255,0.1)'">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="white">
                      <path d="M12 2c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4zm-1 16h2v-2h-2v2z"/>
                  </svg>
                </a>
            </div>
          </div>
        </div>

        <div id="controlPanel" style="
          position: absolute;
          top: 36px;
          left: 8px;
          z-index: 20;
          background: rgba(0,0,0,0.6);
          padding: 6px 8px;
          border-radius: 8px;
          display: flex;
          flex-direction: column;
          gap: 6px;
          font-family: 'Segoe UI', sans-serif;
          font-size: 12px;
          color: white;
          max-width: 160px;
        ">
          <div style="display: flex; align-items: center; gap: 4px;">
            <label for="gridInput">My locator:</label>
            <input type="text" id="gridInput" maxlength="6" placeholder="e.g. JO89tt"
                   style="width: 60px; font-size: 11px; padding: 2px 4px; border-radius: 4px; border: none;">
          </div>
          <div style="display: flex; align-items: center; gap: 4px;">
            <label for="dxGridInput">DX locator:</label>
            <input type="text" id="dxGridInput" maxlength="6" placeholder="e.g. IO91vm"
                   style="width: 60px; font-size: 11px; padding: 2px 4px; border-radius: 4px; border: none;">
          </div>
          <div style="display: flex; flex-direction: column; gap: 2px;">
            <label for="csvUpload">
              CSV <span style="font-size: 9px; color: #ccc;">(e.g. from SkyScanner)</span>:
            </label>
            <input type="file" id="csvUpload" accept=".csv"
                   style="font-size: 10px; padding: 2px 0px; color: white;">
          </div>
          <div style="display: flex; align-items: center; gap: 4px;">
            <button id="prevDate">&lt;</button>
            <input type="date" id="datePicker"
                   style="font-size: 11px; padding: 2px 4px; border-radius: 4px; border: none; width: 100px;">
            <button id="nextDate">&gt;</button>
          </div>
          <div style="display: flex; align-items: center; gap: 4px;">
            <input type="checkbox" id="showSun" style="width: 14px; height: 14px;">
            <label for="showSun">Show sun</label>
          </div>
          <div id="demoStatus" style="color: red; font-weight: bold; margin-top: 10px;">
            This is a DEMO! Load your CSV file and enter your locator
          </div>
        </div>

        <div id="moonTimeControls" style="position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); z-index: 20; display: flex; flex-direction: column; align-items: center; gap: 10px;">
          <span id="moonTimeDisplay" style="color: white; font-family: 'Courier New', monospace; font-size: 18px; padding: 8px 12px; border-radius: 8px; background-color: rgba(0, 0, 0, 0.4); border: 1px solid rgba(255, 255, 255, 0.2);">
            --:-- UTC
          </span>
          <input type="range" id="timeSlider" min="0" max="0" value="0" aria-label="Select time for moon and sun position" role="slider" tabindex="0" style="width: 80vw; max-width: 300px; accent-color: #fff; cursor: pointer;">
          <button id="trackButton">Track</button>
        </div>

        <div id="colorBarContainer" style="
          position: absolute;
          bottom: 180px;
          right: 10px;
          z-index: 30;
          display: flex;
          flex-direction: column;
          align-items: center;
          font-family: 'Segoe UI', sans-serif;
          font-size: 12px;
          color: white;
          width: 40px;
          height: auto;
          top: auto;
          left: auto;
        ">
          <div id="maxNoiseLabel" style="position: absolute; top: -35px; left: 50%; transform: translateX(-75%); text-align: center; width: 100%; z-index: 31; background: rgba(0,0,0,0.6); padding: 2px 4px; border-radius: 2px; line-height: 1.2;">-- dB</div>
          <canvas id="colorBar" width="20" height="200" style="border: 1px solid rgba(255,255,255,0.3); z-index: 30;"></canvas>
          <div id="minNoiseLabel" style="position: absolute; bottom: -145px; left: 50%; transform: translateX(-75%); text-align: center; width: 100%; z-index: 31; background: rgba(0,0,0,0.6); padding: 2px 4px; border-radius: 2px; line-height: 1.2;">-- dB</div>
        </div>

        <script src="/eme-observer/a.ob.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/three@0.146.0/build/three.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/three@0.146.0/examples/js/controls/OrbitControls.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/three@0.146.0/examples/js/loaders/FontLoader.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/three@0.146.0/examples/js/geometries/TextGeometry.js"></script>

        <script>
            const _0x41e887=_0x4cf7;(function(_0x43bcb1,_0x1dbaef){const _0x3f5a4e=_0x4cf7,_0x533f96=_0x43bcb1();while(!![]){try{const _0x2029b5=parseInt(_0x3f5a4e(0x212))/0x1*(-parseInt(_0x3f5a4e(0x213))/0x2)+parseInt(_0x3f5a4e(0x1f0))/0x3*(-parseInt(_0x3f5a4e(0x1f2))/0x4)+parseInt(_0x3f5a4e(0x1f9))/0x5+parseInt(_0x3f5a4e(0x2ab))/0x6+-parseInt(_0x3f5a4e(0x22d))/0x7*(-parseInt(_0x3f5a4e(0x1fb))/0x8)+parseInt(_0x3f5a4e(0x288))/0x9+parseInt(_0x3f5a4e(0x25e))/0xa;if(_0x2029b5===_0x1dbaef)break;else _0x533f96['push'](_0x533f96['shift']());}catch(_0x26b57d){_0x533f96['push'](_0x533f96['shift']());}}}(_0x236c,0x425c1));let lastTouchEnd=0x0;document[_0x41e887(0x273)]('touchstart',function(_0x12d3b9){const _0x52a107=_0x41e887;_0x12d3b9[_0x52a107(0x253)]['length']>0x1&&_0x12d3b9[_0x52a107(0x2a4)]();},{'passive':![]}),document[_0x41e887(0x273)](_0x41e887(0x2a2),function(_0x107874){const _0x3eb8b8=_0x41e887,_0xfa06e0=new Date()[_0x3eb8b8(0x23e)]();_0xfa06e0-lastTouchEnd<=0x12c&&_0x107874[_0x3eb8b8(0x2a4)](),lastTouchEnd=_0xfa06e0;},![]),document['addEventListener']('gesturestart',function(_0x35d9dc){const _0x5d6c5c=_0x41e887;_0x35d9dc[_0x5d6c5c(0x2a4)]();},![]),document['addEventListener'](_0x41e887(0x22c),function(_0x38d642){const _0x3b667f=_0x41e887;_0x38d642[_0x3b667f(0x2a4)]();},![]),document[_0x41e887(0x273)]('gestureend',function(_0x59fc99){_0x59fc99['preventDefault']();},![]);const scene=new THREE[(_0x41e887(0x22a))](),moonTrajectoryGroup=new THREE['Group'](),sunTrajectoryGroup=new THREE[(_0x41e887(0x22f))]();let moonPositions=[],dxMoonPositions=[],sunPositions=[],commonMoonWindow=[],currentTimeIndex=0x0,moonMarker=null,sunMarker=null,azStep=0x5,elStep=0x5,isRealTime=![],currentRealTimeData=null,autoTracking=![],trackingTimeout=null,trackingInterval=null,isDemoData=!![];const moonTimeDisplay=document[_0x41e887(0x214)]('moonTimeDisplay'),timeSlider=document['getElementById'](_0x41e887(0x2cd)),datePicker=document[_0x41e887(0x214)]('datePicker'),prevDateBtn=document[_0x41e887(0x214)](_0x41e887(0x2d6)),nextDateBtn=document[_0x41e887(0x214)](_0x41e887(0x234)),gridInput=document[_0x41e887(0x214)](_0x41e887(0x233)),dxGridInput=document[_0x41e887(0x214)]('dxGridInput'),showSunCheckbox=document[_0x41e887(0x214)]('showSun'),demoStatus=document[_0x41e887(0x214)](_0x41e887(0x21c)),colorBarCanvas=document['getElementById'](_0x41e887(0x27f)),colorBarContext=colorBarCanvas[_0x41e887(0x265)]('2d'),minNoiseLabel=document['getElementById']('minNoiseLabel'),maxNoiseLabel=document[_0x41e887(0x214)](_0x41e887(0x242)),colorBarContainer=document[_0x41e887(0x214)](_0x41e887(0x2b8)),trackButton=document['getElementById'](_0x41e887(0x271)),renderer=new THREE['WebGLRenderer']({'antialias':!![]});renderer[_0x41e887(0x239)](window[_0x41e887(0x285)],window[_0x41e887(0x2bb)]),document[_0x41e887(0x2c3)]['appendChild'](renderer[_0x41e887(0x20d)]);const camera=new THREE[(_0x41e887(0x20e))](0x4b,window[_0x41e887(0x285)]/window[_0x41e887(0x2bb)],0.1,0x3e8),defaultDistance=0x2,defaultAzRad=THREE[_0x41e887(0x23c)][_0x41e887(0x226)](0xb4),defaultElRad=THREE['MathUtils'][_0x41e887(0x226)](0x1e);camera[_0x41e887(0x2c0)][_0x41e887(0x22e)](defaultDistance*Math[_0x41e887(0x29f)](defaultElRad)*Math['sin'](defaultAzRad),defaultDistance*Math[_0x41e887(0x20c)](defaultElRad),defaultDistance*Math['cos'](defaultElRad)*Math[_0x41e887(0x29f)](defaultAzRad)),camera['lookAt'](0x0,0x0,0x0);const controls=new THREE['OrbitControls'](camera,renderer[_0x41e887(0x20d)]);controls['enableDamping']=!![],controls[_0x41e887(0x2d0)]['set'](0x0,0x0,0x0),controls[_0x41e887(0x290)]=0.5,controls[_0x41e887(0x2b2)]=0.5,controls['panSpeed']=0.5,controls[_0x41e887(0x24c)]();function onWindowResize(){const _0x1d5ba4=_0x41e887;camera[_0x1d5ba4(0x261)]=window[_0x1d5ba4(0x285)]/window['innerHeight'],camera[_0x1d5ba4(0x2c4)](),renderer[_0x1d5ba4(0x239)](window[_0x1d5ba4(0x285)],window[_0x1d5ba4(0x2bb)]),drawColorBar();}window['addEventListener'](_0x41e887(0x24a),onWindowResize),window[_0x41e887(0x273)](_0x41e887(0x286),onWindowResize);const raycaster=new THREE[(_0x41e887(0x298))](),mouse=new THREE['Vector2']();let spheres=[],minNoise=Infinity,maxNoise=-Infinity;const rawPoints=[];scene[_0x41e887(0x24b)](moonTrajectoryGroup),scene[_0x41e887(0x24b)](sunTrajectoryGroup);const TRAJECTORY_SCALE=1.05,MARKER_SCALE=1.05;function getColor(_0x280d17){const _0x2cb065=_0x41e887,_0xc2ae1f=maxNoise-minNoise,_0x5aa2b2=_0xc2ae1f===0x0?0.5:(_0x280d17-minNoise)/_0xc2ae1f;return new THREE['Color']()[_0x2cb065(0x2a8)](0.7-_0x5aa2b2*0.7,0x1,0.5);}function calculateStepSizes(){const _0x58daf1=_0x41e887;if(!rawPoints[_0x58daf1(0x228)])return{'azStep':0x5,'elStep':0x5};const _0x83d89a=[...new Set(rawPoints[_0x58daf1(0x250)](_0x2a5ab0=>_0x2a5ab0['az']))]['sort']((_0x2ddacf,_0x4909cb)=>_0x2ddacf-_0x4909cb),_0x3f4c52=[...new Set(rawPoints[_0x58daf1(0x250)](_0x4e36c0=>_0x4e36c0['el']))][_0x58daf1(0x21e)]((_0xe9a78e,_0x5267f8)=>_0xe9a78e-_0x5267f8),_0x1256a4=_0x83d89a[_0x58daf1(0x216)](0x1)[_0x58daf1(0x250)]((_0xe91a04,_0x570cf4)=>_0xe91a04-_0x83d89a[_0x570cf4])[_0x58daf1(0x20f)](_0x19aa66=>_0x19aa66>0x0),_0x50b6d8=_0x3f4c52[_0x58daf1(0x216)](0x1)[_0x58daf1(0x250)]((_0x3b99b3,_0x2be4bc)=>_0x3b99b3-_0x3f4c52[_0x2be4bc])['filter'](_0x5ebf55=>_0x5ebf55>0x0),_0x285698=_0x1256a4[_0x58daf1(0x228)]?Math[_0x58daf1(0x1ff)](..._0x1256a4):0x5,_0x597f0e=_0x50b6d8[_0x58daf1(0x228)]?Math[_0x58daf1(0x1ff)](..._0x50b6d8):0x5;return{'azStep':_0x285698,'elStep':_0x597f0e};}function interpolateNoiseAtPosition(_0x5db842,_0x2c707e){const _0x253f00=_0x41e887;if(!rawPoints['length'])return null;const _0x1df66e=Math[_0x253f00(0x276)](azStep,elStep)*0x1,_0x4dde34=0x6,_0x5d4e91=0x1,_0x3dde28=rawPoints[_0x253f00(0x250)](_0x4ca90a=>{const _0x133f5c=_0x253f00,_0x3d57fc=Math['abs'](_0x4ca90a['az']-_0x5db842),_0x542d48=Math['abs'](_0x4ca90a['el']-_0x2c707e),_0x3293e0=Math[_0x133f5c(0x1f4)](_0x3d57fc*_0x3d57fc+_0x542d48*_0x542d48);return{..._0x4ca90a,'distance':_0x3293e0};}),_0xb5a636=_0x3dde28[_0x253f00(0x20f)](_0x1d8964=>_0x1d8964['distance']<=_0x1df66e);if(_0xb5a636[_0x253f00(0x228)]>=_0x5d4e91){if(_0xb5a636[_0x253f00(0x228)]===0x1)return{'noise':_0xb5a636[0x0]['noise']};let _0x56f227=0x0,_0xe29fcf=0x0;_0xb5a636[_0x253f00(0x24f)](_0x327672=>{const _0x5d56de=_0x253f00,_0x48639c=0x1/(_0x327672[_0x5d56de(0x2a9)]*_0x327672[_0x5d56de(0x2a9)]+0.000001);_0xe29fcf+=_0x48639c*_0x327672['noise'],_0x56f227+=_0x48639c;});if(_0x56f227===0x0)return null;const _0xc16a84=_0xe29fcf/_0x56f227;return{'noise':Math['max'](minNoise,Math[_0x253f00(0x1ff)](maxNoise,_0xc16a84))};}const _0x364c21=_0x3dde28[_0x253f00(0x29b)]((_0x1eceb4,_0x4d6700)=>_0x4d6700[_0x253f00(0x2a9)]<_0x1eceb4[_0x253f00(0x2a9)]?_0x4d6700:_0x1eceb4,_0x3dde28[0x0]);if(_0x364c21['distance']<=_0x4dde34)return{'noise':_0x364c21[_0x253f00(0x2ba)]};return null;}function getCurrentPositions(){const _0x3e6607=_0x41e887,_0x40bdd5=new Date(),_0x1026bf=gridInput[_0x3e6607(0x1fa)]||'JO89tt',_0x1b3f9b=maidenheadToLatLon(_0x1026bf);if(!_0x1b3f9b)return null;const _0x34063c=new Astronomy['Observer'](_0x1b3f9b[_0x3e6607(0x1f7)],_0x1b3f9b['lon'],0x0),_0x1cf886=Astronomy[_0x3e6607(0x26d)](Astronomy[_0x3e6607(0x27d)][_0x3e6607(0x249)],_0x40bdd5,_0x34063c,!![],![]),_0x4aca14=Astronomy[_0x3e6607(0x1ec)](_0x40bdd5,_0x34063c,_0x1cf886['ra'],_0x1cf886[_0x3e6607(0x215)],_0x3e6607(0x2b4)),_0x6d4ec4=_0x4aca14[_0x3e6607(0x1fe)],_0x409d88=_0x4aca14['azimuth'],_0x14e63f=THREE['MathUtils']['degToRad'](0x168-_0x409d88),_0x25ff47=THREE['MathUtils'][_0x3e6607(0x226)](Math['max'](_0x6d4ec4,0x0)),_0x55c830=0x1,_0x1867c0=_0x55c830*Math['cos'](_0x25ff47)*Math[_0x3e6607(0x20c)](_0x14e63f),_0xc03828=_0x55c830*Math[_0x3e6607(0x20c)](_0x25ff47),_0x270a96=_0x55c830*Math[_0x3e6607(0x29f)](_0x25ff47)*Math['cos'](_0x14e63f),_0x4e2b48=new THREE[(_0x3e6607(0x2be))](_0x1867c0,_0xc03828,_0x270a96);let _0x19251a=-0x1,_0xad230a=0x0,_0x3db3ce=new THREE[(_0x3e6607(0x2be))]();if(showSunCheckbox[_0x3e6607(0x1fc)]){const _0x38d878=Astronomy[_0x3e6607(0x26d)](Astronomy[_0x3e6607(0x27d)][_0x3e6607(0x279)],_0x40bdd5,_0x34063c,!![],![]),_0x507f4e=Astronomy[_0x3e6607(0x1ec)](_0x40bdd5,_0x34063c,_0x38d878['ra'],_0x38d878[_0x3e6607(0x215)],_0x3e6607(0x2b4));_0x19251a=_0x507f4e[_0x3e6607(0x1fe)],_0xad230a=_0x507f4e[_0x3e6607(0x1ed)];const _0x2bcd22=THREE[_0x3e6607(0x23c)][_0x3e6607(0x226)](0x168-_0xad230a),_0x269940=THREE[_0x3e6607(0x23c)][_0x3e6607(0x226)](Math[_0x3e6607(0x276)](_0x19251a,0x0)),_0x2e73d6=_0x55c830*Math[_0x3e6607(0x29f)](_0x269940)*Math[_0x3e6607(0x20c)](_0x2bcd22),_0x4ce164=_0x55c830*Math[_0x3e6607(0x20c)](_0x269940),_0x34582f=_0x55c830*Math[_0x3e6607(0x29f)](_0x269940)*Math[_0x3e6607(0x29f)](_0x2bcd22);_0x3db3ce=new THREE[(_0x3e6607(0x2be))](_0x2e73d6,_0x4ce164,_0x34582f);}let _0x53f86f=null;const _0x4a89ca=dxGridInput[_0x3e6607(0x1fa)];if(_0x4a89ca&&isValidGrid(_0x4a89ca)){const _0x59954b=maidenheadToLatLon(_0x4a89ca),_0x3b7607=new Astronomy[(_0x3e6607(0x202))](_0x59954b[_0x3e6607(0x1f7)],_0x59954b[_0x3e6607(0x25c)],0x0),_0x8cd794=Astronomy[_0x3e6607(0x26d)](Astronomy[_0x3e6607(0x27d)][_0x3e6607(0x249)],_0x40bdd5,_0x3b7607,!![],![]),_0x200108=Astronomy[_0x3e6607(0x1ec)](_0x40bdd5,_0x3b7607,_0x8cd794['ra'],_0x8cd794[_0x3e6607(0x215)],_0x3e6607(0x2b4)),_0x2f7416=_0x200108[_0x3e6607(0x1ed)],_0x5cb07d=_0x200108[_0x3e6607(0x1fe)];_0x53f86f={'az':_0x2f7416,'el':_0x5cb07d};}return{'moon':{'pos':_0x4e2b48,'az':_0x409d88,'el':_0x6d4ec4,'time':_0x40bdd5},'sun':{'pos':_0x3db3ce,'az':_0xad230a,'el':_0x19251a,'time':_0x40bdd5},'dxMoon':_0x53f86f};}function isTrackable(){const _0x5a9efb=_0x41e887,_0x213fa2=getCurrentPositions();if(!_0x213fa2)return![];const _0xee213c=_0x213fa2['moon']['el']>0x0,_0x2b739f=showSunCheckbox[_0x5a9efb(0x1fc)]&&_0x213fa2[_0x5a9efb(0x1ef)]['el']>0x0;return _0xee213c||_0x2b739f;}function updateTrackButtonState(){const _0x42b256=_0x41e887,_0x13335a=isTrackable();trackButton[_0x42b256(0x2af)]=!_0x13335a&&!autoTracking;}function updateTracking(){const _0x1cdca2=_0x41e887;if(!autoTracking)return;currentRealTimeData=getCurrentPositions();const _0x3b075a=currentRealTimeData,_0x130d06=_0x3b075a[_0x1cdca2(0x29d)]['el']>0x0,_0x466131=showSunCheckbox[_0x1cdca2(0x1fc)]&&_0x3b075a['sun']['el']>0x0;if(!_0x130d06&&!_0x466131){stopTracking();return;}updateMoonMarker(),updateSunMarker(),updateTimeDisplay(),updateTrackButtonState();}function startTracking(){const _0x5af8a2=_0x41e887,_0x5e51fb=new Date(),_0x4bea52=_0x5e51fb[_0x5af8a2(0x289)]()['split']('T')[0x0];datePicker['value']!==_0x4bea52&&(datePicker[_0x5af8a2(0x1fa)]=_0x4bea52,addTrajectories(_0x4bea52));currentRealTimeData=getCurrentPositions(),isRealTime=!![],timeSlider[_0x5af8a2(0x2af)]=!![],updateMoonMarker(),updateSunMarker(),updateTimeDisplay(),trackButton[_0x5af8a2(0x2b1)]=_0x5af8a2(0x260),autoTracking=!![];const _0x5b2feb=new Date(),_0xc34dcc=_0x5b2feb['getUTCSeconds'](),_0x35adb9=(0x3c-_0xc34dcc)*0x3e8-_0x5b2feb[_0x5af8a2(0x20b)]();trackingTimeout=setTimeout(()=>{updateTracking(),trackingInterval=setInterval(updateTracking,0xea60);},_0x35adb9);}function stopTracking(){const _0x27d3ab=_0x41e887;if(trackingInterval)clearInterval(trackingInterval);if(trackingTimeout)clearTimeout(trackingTimeout);autoTracking=![],isRealTime=![],currentRealTimeData=null,timeSlider[_0x27d3ab(0x2af)]=moonPositions[_0x27d3ab(0x228)]===0x0,trackButton[_0x27d3ab(0x2b1)]='Track';const _0x1c0dff=new Date(),_0x14827a=_0x1c0dff[_0x27d3ab(0x241)]()*0x3c+_0x1c0dff[_0x27d3ab(0x26e)](),_0x5efeba=Math['round'](_0x14827a/0xa);_0x5efeba>=0x0&&_0x5efeba<moonPositions[_0x27d3ab(0x228)]&&(currentTimeIndex=_0x5efeba),updateTimeSlider(),updateTrackButtonState();}function drawColorBar(){const _0x19bb14=_0x41e887;if(minNoise===Infinity||maxNoise===-Infinity){colorBarContainer[_0x19bb14(0x229)][_0x19bb14(0x2b5)]=_0x19bb14(0x294);return;}colorBarContainer[_0x19bb14(0x229)]['display']=_0x19bb14(0x2a0),minNoiseLabel[_0x19bb14(0x2b1)]=minNoise[_0x19bb14(0x211)](0x2)+_0x19bb14(0x1ea),maxNoiseLabel[_0x19bb14(0x2b1)]=maxNoise[_0x19bb14(0x211)](0x2)+_0x19bb14(0x1ea);const _0x575a46=window[_0x19bb14(0x254)]||0x1,_0x4770d5=getComputedStyle(colorBarCanvas),_0x463873=parseFloat(_0x4770d5[_0x19bb14(0x231)]),_0x10c37c=parseFloat(_0x4770d5['height']);colorBarCanvas[_0x19bb14(0x231)]=_0x463873*_0x575a46,colorBarCanvas['height']=_0x10c37c*_0x575a46,colorBarContext[_0x19bb14(0x217)](_0x575a46,_0x575a46),colorBarContext[_0x19bb14(0x2d1)](),colorBarContext[_0x19bb14(0x2c1)](0x1,0x0,0x0,0x1,0x0,0x0),colorBarContext['clearRect'](0x0,0x0,colorBarCanvas['width'],colorBarCanvas[_0x19bb14(0x25a)]);const _0x5b658f=colorBarContext[_0x19bb14(0x246)](0x0,colorBarCanvas[_0x19bb14(0x25a)],0x0,0x0);for(let _0x10b241=0x0;_0x10b241<=0x1;_0x10b241+=0.1){const _0x24b4d2=_0x10b241,_0x3b57d9=new THREE['Color']()[_0x19bb14(0x2a8)](0.7-_0x24b4d2*0.7,0x1,0.5);_0x5b658f['addColorStop'](_0x10b241,'#'+_0x3b57d9[_0x19bb14(0x280)]());}colorBarContext[_0x19bb14(0x277)]=_0x5b658f,colorBarContext[_0x19bb14(0x23f)](0x0,0x0,colorBarCanvas[_0x19bb14(0x231)],colorBarCanvas[_0x19bb14(0x25a)]);let _0x1e89b3,_0x3ecb15,_0x2b9e91=![];if(isRealTime&&currentRealTimeData&&currentRealTimeData['moon']['el']>0x0&&rawPoints['length'])_0x2b9e91=!![],_0x1e89b3=currentRealTimeData[_0x19bb14(0x29d)]['az'],_0x3ecb15=currentRealTimeData[_0x19bb14(0x29d)]['el'];else{if(!isRealTime&&moonPositions['length']&&moonPositions[currentTimeIndex]&&moonPositions[currentTimeIndex][_0x19bb14(0x267)]>0x0&&rawPoints[_0x19bb14(0x228)]){_0x2b9e91=!![];const _0x33a8cf=moonPositions[currentTimeIndex];_0x1e89b3=_0x33a8cf[_0x19bb14(0x1ed)],_0x3ecb15=_0x33a8cf[_0x19bb14(0x267)];}}if(_0x2b9e91){const _0x5ecb21=interpolateNoiseAtPosition(_0x1e89b3,_0x3ecb15);if(_0x5ecb21){const _0x58bc2e=_0x5ecb21[_0x19bb14(0x2ba)],_0x247902=maxNoise-minNoise===0x0?0.5:(_0x58bc2e-minNoise)/(maxNoise-minNoise);let _0x28d30b=colorBarCanvas[_0x19bb14(0x25a)]*(0x1-_0x247902);_0x28d30b=Math[_0x19bb14(0x276)](0x2*_0x575a46,Math['min'](colorBarCanvas[_0x19bb14(0x25a)]-0x2*_0x575a46,_0x28d30b));const _0x52887a=window[_0x19bb14(0x285)]<=0x258||window[_0x19bb14(0x2cb)](_0x19bb14(0x26c))[_0x19bb14(0x2a5)],_0x2439e2=_0x52887a?0xc:0x12,_0x137c46=_0x52887a?0xe:0x16,_0x58ce1a=_0x52887a?0xc:0xe;colorBarContext[_0x19bb14(0x2d5)]=_0x19bb14(0x219),colorBarContext[_0x19bb14(0x29c)]=0x2*_0x575a46,colorBarContext[_0x19bb14(0x205)](),colorBarContext['moveTo'](colorBarCanvas[_0x19bb14(0x231)],_0x28d30b),colorBarContext[_0x19bb14(0x278)](colorBarCanvas[_0x19bb14(0x231)]+_0x2439e2*_0x575a46,_0x28d30b-_0x2439e2/0x2*_0x575a46),colorBarContext[_0x19bb14(0x278)](colorBarCanvas[_0x19bb14(0x231)]+_0x2439e2*_0x575a46,_0x28d30b+_0x2439e2/0x2*_0x575a46),colorBarContext[_0x19bb14(0x203)](),colorBarContext[_0x19bb14(0x293)](),colorBarContext['fillStyle']='#ffffff',colorBarContext['fill'](),colorBarContext[_0x19bb14(0x277)]=_0x19bb14(0x248),colorBarContext[_0x19bb14(0x2d5)]='#000000',colorBarContext[_0x19bb14(0x29c)]=0x1*_0x575a46,colorBarContext[_0x19bb14(0x2d3)]=_0x19bb14(0x207)+_0x58ce1a*_0x575a46+_0x19bb14(0x24e),colorBarContext[_0x19bb14(0x27a)]=_0x19bb14(0x24d),colorBarContext[_0x19bb14(0x295)]='middle',colorBarContext[_0x19bb14(0x28e)](_0x58bc2e['toFixed'](0x2)+'\x20dB',colorBarCanvas[_0x19bb14(0x231)]+_0x137c46*_0x575a46,_0x28d30b),colorBarContext[_0x19bb14(0x1f5)](_0x58bc2e['toFixed'](0x2)+_0x19bb14(0x1ea),colorBarCanvas[_0x19bb14(0x231)]+_0x137c46*_0x575a46,_0x28d30b),colorBarContext[_0x19bb14(0x277)]='#ff0000',colorBarContext['fillRect'](0x0,_0x28d30b-0x2*_0x575a46,0x5*_0x575a46,0x4*_0x575a46);}}colorBarContext['restore']();}function updateMoonMarker(){const _0x4ec28e=_0x41e887;let _0x2ff17d;if(isRealTime){if(!currentRealTimeData){if(moonMarker)moonMarker[_0x4ec28e(0x281)]=![];return![];}const _0x132794=currentRealTimeData[_0x4ec28e(0x29d)];if(_0x132794['el']<=0x0){if(moonMarker)moonMarker[_0x4ec28e(0x281)]=![];return![];}_0x2ff17d=_0x132794[_0x4ec28e(0x245)][_0x4ec28e(0x2d7)]()['multiplyScalar'](MARKER_SCALE);}else{if(!moonPositions['length']||!moonPositions[currentTimeIndex]){if(moonMarker)moonMarker[_0x4ec28e(0x281)]=![];return![];}const _0x191ddc=moonPositions[currentTimeIndex];if(_0x191ddc[_0x4ec28e(0x267)]<=0x0){if(moonMarker)moonMarker[_0x4ec28e(0x281)]=![];return![];}_0x2ff17d=_0x191ddc[_0x4ec28e(0x2c0)]['clone']()[_0x4ec28e(0x2d9)](MARKER_SCALE);}if(!moonMarker){const _0x3fa0b9=new THREE[(_0x4ec28e(0x27b))](0.03),_0x36401f=new THREE[(_0x4ec28e(0x2dd))]({'color':0xffffff});moonMarker=new THREE[(_0x4ec28e(0x2db))](_0x3fa0b9,_0x36401f),scene['add'](moonMarker);}return moonMarker['visible']=!![],moonMarker[_0x4ec28e(0x2c0)][_0x4ec28e(0x2c5)](_0x2ff17d),!![];}function updateSunMarker(){const _0x5a70cb=_0x41e887;let _0xb03cfd;if(isRealTime){if(!currentRealTimeData||!showSunCheckbox['checked']){if(sunMarker)sunMarker['visible']=![];return![];}const _0x4126e9=currentRealTimeData[_0x5a70cb(0x1ef)];if(_0x4126e9['el']<=0x0){if(sunMarker)sunMarker[_0x5a70cb(0x281)]=![];return![];}_0xb03cfd=_0x4126e9['pos']['clone']()[_0x5a70cb(0x2d9)](MARKER_SCALE);}else{if(!sunPositions[_0x5a70cb(0x228)]||!showSunCheckbox[_0x5a70cb(0x1fc)]||!sunPositions[currentTimeIndex]){if(sunMarker)sunMarker[_0x5a70cb(0x281)]=![];return![];}const _0x506e24=sunPositions[currentTimeIndex];if(_0x506e24[_0x5a70cb(0x267)]<=0x0){if(sunMarker)sunMarker[_0x5a70cb(0x281)]=![];return![];}_0xb03cfd=_0x506e24[_0x5a70cb(0x2c0)]['clone']()[_0x5a70cb(0x2d9)](MARKER_SCALE);}if(!sunMarker){const _0x5ee0af=new THREE[(_0x5a70cb(0x27b))](0.02),_0x4f819e=new THREE[(_0x5a70cb(0x2dd))]({'color':0xffa500});sunMarker=new THREE[(_0x5a70cb(0x2db))](_0x5ee0af,_0x4f819e),scene['add'](sunMarker);}return sunMarker['visible']=!![],sunMarker[_0x5a70cb(0x2c0)][_0x5a70cb(0x2c5)](_0xb03cfd),!![];}function updateInfoBox(){const _0x5104dd=_0x41e887;let _0x4e86d0='';if(isRealTime){if(!currentRealTimeData){infoBox[_0x5104dd(0x1eb)]=_0x5104dd(0x291),infoBox[_0x5104dd(0x229)]['display']='block';return;}const _0x24cbc4=currentRealTimeData;if(_0x24cbc4[_0x5104dd(0x29d)]['el']>0x0){const _0x55e724=interpolateNoiseAtPosition(_0x24cbc4[_0x5104dd(0x29d)]['az'],_0x24cbc4[_0x5104dd(0x29d)]['el']),_0x341d8c=_0x55e724?'Noise:\x20'+_0x55e724[_0x5104dd(0x2ba)][_0x5104dd(0x211)](0x2)+_0x5104dd(0x1ea):'Noise:\x20N/A';_0x4e86d0+=_0x5104dd(0x237)+_0x24cbc4['moon']['az'][_0x5104dd(0x211)](0x1)+'°\x20El:\x20'+_0x24cbc4[_0x5104dd(0x29d)]['el'][_0x5104dd(0x211)](0x1)+_0x5104dd(0x2c7)+_0x341d8c+_0x5104dd(0x243);}else _0x4e86d0+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<b>Moon</b><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Moon\x20below\x20horizon\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';_0x24cbc4['dxMoon']&&(_0x4e86d0+=_0x5104dd(0x22b),_0x24cbc4['dxMoon']['el']>0x0?(_0x4e86d0+=_0x5104dd(0x26b)+_0x24cbc4[_0x5104dd(0x268)]['az'][_0x5104dd(0x211)](0x1)+'°\x20El:\x20'+_0x24cbc4[_0x5104dd(0x268)]['el'][_0x5104dd(0x211)](0x1)+'°\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x24cbc4[_0x5104dd(0x29d)]['el']>0x0&&_0x24cbc4[_0x5104dd(0x268)]['el']>0x0&&(_0x4e86d0+='<br><span\x20style=\x22color:\x20lime;\x22>Common\x20window</span>')):_0x4e86d0+=_0x5104dd(0x299)),showSunCheckbox[_0x5104dd(0x1fc)]&&(_0x4e86d0+=_0x5104dd(0x22b),_0x24cbc4[_0x5104dd(0x1ef)]['el']>0x0?_0x4e86d0+=_0x5104dd(0x2ae)+_0x24cbc4[_0x5104dd(0x1ef)]['az'][_0x5104dd(0x211)](0x1)+'°\x20El:\x20'+_0x24cbc4['sun']['el'][_0x5104dd(0x211)](0x1)+'°\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':_0x4e86d0+=_0x5104dd(0x218));}else{if(moonPositions[_0x5104dd(0x228)]&&moonPositions[currentTimeIndex]){const _0x15f0bd=moonPositions[currentTimeIndex];if(_0x15f0bd[_0x5104dd(0x267)]>0x0){const _0x5b5d81=interpolateNoiseAtPosition(_0x15f0bd[_0x5104dd(0x1ed)],_0x15f0bd[_0x5104dd(0x267)]),_0x15d98b=_0x5b5d81?_0x5104dd(0x1fd)+_0x5b5d81[_0x5104dd(0x2ba)][_0x5104dd(0x211)](0x2)+_0x5104dd(0x1ea):_0x5104dd(0x28c);_0x4e86d0+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<b>Moon</b><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Az:\x20'+_0x15f0bd[_0x5104dd(0x1ed)]['toFixed'](0x1)+'°\x20El:\x20'+_0x15f0bd[_0x5104dd(0x267)][_0x5104dd(0x211)](0x1)+_0x5104dd(0x2cf)+_0x15d98b+_0x5104dd(0x2bd);}else _0x4e86d0+=_0x5104dd(0x23a);}else _0x4e86d0+=_0x5104dd(0x220);if(dxMoonPositions[_0x5104dd(0x228)]&&dxMoonPositions[currentTimeIndex]){const _0x1d175b=dxMoonPositions[currentTimeIndex];_0x4e86d0+=_0x5104dd(0x22b),_0x1d175b[_0x5104dd(0x267)]>0x0?_0x4e86d0+=_0x5104dd(0x26b)+_0x1d175b[_0x5104dd(0x1ed)]['toFixed'](0x1)+_0x5104dd(0x25f)+_0x1d175b['elevation']['toFixed'](0x1)+'°\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':_0x4e86d0+=_0x5104dd(0x299);}if(showSunCheckbox[_0x5104dd(0x1fc)]&&sunPositions[_0x5104dd(0x228)]&&sunPositions[currentTimeIndex]){const _0x1303a5=sunPositions[currentTimeIndex];_0x4e86d0+=_0x5104dd(0x22b),_0x1303a5['elevation']>0x0?_0x4e86d0+=_0x5104dd(0x2ae)+_0x1303a5['azimuth']['toFixed'](0x1)+_0x5104dd(0x25f)+_0x1303a5[_0x5104dd(0x267)][_0x5104dd(0x211)](0x1)+_0x5104dd(0x2ca):_0x4e86d0+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<b>Sun</b><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Sun\x20below\x20horizon\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';}else showSunCheckbox[_0x5104dd(0x1fc)]&&(_0x4e86d0+=_0x5104dd(0x2a7));}infoBox[_0x5104dd(0x1eb)]=_0x4e86d0,infoBox[_0x5104dd(0x229)][_0x5104dd(0x2b5)]=_0x5104dd(0x292);}function updateTimeDisplay(){const _0x4eda97=_0x41e887;let _0x3bf449,_0x442bcf,_0x33a248;if(isRealTime){if(!currentRealTimeData){moonTimeDisplay[_0x4eda97(0x2b1)]='--:--\x20UTC',updateInfoBox(),drawColorBar();return;}_0x3bf449=currentRealTimeData['moon'][_0x4eda97(0x262)],_0x442bcf=currentRealTimeData['moon']['el']>0x0,_0x33a248=showSunCheckbox[_0x4eda97(0x1fc)]&&currentRealTimeData[_0x4eda97(0x1ef)]['el']>0x0;}else{if(!moonPositions[_0x4eda97(0x228)]||!moonPositions[currentTimeIndex]){moonTimeDisplay[_0x4eda97(0x2b1)]=_0x4eda97(0x2b7),updateInfoBox(),drawColorBar();return;}_0x3bf449=moonPositions[currentTimeIndex][_0x4eda97(0x262)],_0x442bcf=moonPositions[currentTimeIndex][_0x4eda97(0x267)]>0x0,_0x33a248=showSunCheckbox[_0x4eda97(0x1fc)]&&sunPositions[currentTimeIndex]?.[_0x4eda97(0x267)]>0x0;}if(_0x442bcf||_0x33a248){const _0x541fd5=String(_0x3bf449[_0x4eda97(0x241)]())[_0x4eda97(0x272)](0x2,'0'),_0x46f4f1=String(_0x3bf449[_0x4eda97(0x26e)]())[_0x4eda97(0x272)](0x2,'0');moonTimeDisplay[_0x4eda97(0x2b1)]=_0x541fd5+':'+_0x46f4f1+_0x4eda97(0x21b);}else moonTimeDisplay['textContent']=_0x4eda97(0x2b7);updateInfoBox(),drawColorBar();}function updateTimeSlider(){const _0x36e2de=_0x41e887;if(isRealTime)return;timeSlider[_0x36e2de(0x1ff)]=0x0,timeSlider[_0x36e2de(0x276)]=moonPositions[_0x36e2de(0x228)]-0x1||0x0,timeSlider['value']=currentTimeIndex,timeSlider[_0x36e2de(0x2af)]=moonPositions[_0x36e2de(0x228)]===0x0,updateMoonMarker(),updateSunMarker(),updateTimeDisplay();}function changeTime(_0x4ae705){const _0x112e20=_0x41e887;if(isRealTime||!moonPositions[_0x112e20(0x228)])return;currentTimeIndex=Math[_0x112e20(0x276)](0x0,Math[_0x112e20(0x1ff)](_0x4ae705,moonPositions[_0x112e20(0x228)]-0x1)),updateMoonMarker(),updateSunMarker(),updateTimeDisplay();}function _0x4cf7(_0x558a1e,_0x34db63){_0x558a1e=_0x558a1e-0x1ea;const _0x236c08=_0x236c();let _0x4cf73f=_0x236c08[_0x558a1e];return _0x4cf73f;}function _0x236c(){const _0x55d541=['gridInput','nextDate','setUTCDate','label','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<b>Moon</b><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Az:\x20','TubeGeometry','setSize','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<b>Moon</b><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Moon\x20below\x20horizon\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','push','MathUtils','setFromPoints','getTime','fillRect','clear','getUTCHours','maxNoiseLabel','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','error','pos','createLinearGradient','RingGeometry','#ffffff','Moon','resize','add','update','left','px\x20Segoe\x20UI','forEach','map','load','CatmullRomCurve3','touches','devicePixelRatio','rotation','UTC','fields','click','intersectObjects','height','uploaded','lon','Error:\x20No\x20valid\x20data\x20points\x20in\x20CSV','2304760YDNQib','°\x20El:\x20','Stop','aspect','time','getUTCDate','TextGeometry','getContext','toString','elevation','dxMoon','change','This\x20is\x20a\x20DEMO!\x20Load\x20your\x20CSV\x20file','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<b>DX\x20Moon</b><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Az:\x20','(orientation:\x20portrait)','Equator','getUTCMinutes','divideScalar','\x20dB\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','trackButton','padStart','addEventListener','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<b>Measurement</b><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Az:\x20','DoubleSide','max','fillStyle','lineTo','Sun','textAlign','SphereGeometry','Valid','Body','lookAt','colorBar','getHexString','visible','object','remove','includes','innerWidth','orientationchange','skyObserverGrid','2099160TqezEX','toISOString','#fff','getUTCFullYear','Noise:\x20N/A','every','strokeText','color','rotateSpeed','No\x20data','block','stroke','none','textBaseline','setScalar','getUTCMonth','Raycaster','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<b>DX\x20Moon</b><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20DX\x20Moon\x20below\x20horizon\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','touchstart','reduce','lineWidth','moon','charCodeAt','cos','flex','infoBox','touchend','Azimuth','preventDefault','matches','setFromCamera','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br><b>Sun</b><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Sun\x20below\x20horizon\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','setHSL','distance','toUpperCase','3318kSEiBs','Error:\x20CSV\x20must\x20contain\x20Azimuth,\x20Elevation,\x20and\x20Noise\x20columns','catch','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<b>Sun</b><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Az:\x20','disabled','clientY','textContent','zoomSpeed','Line','normal','display','Error\x20loading\x20demo\x20CSV:','--:--\x20UTC','colorBarContainer','Elevation','noise','innerHeight','getItem','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Vector3','borderColor','position','setTransform','changedTouches','body','updateProjectionMatrix','copy','files','°<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','input','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<b>Moon</b><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Az:\x20','°\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','matchMedia','Enter\x20your\x20locator','timeSlider','skyObserverCsv','°<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','target','save','userData','font','setItem','strokeStyle','prevDate','clone','getCenter','multiplyScalar','True','Mesh','test','MeshBasicMaterial','expandByPoint','touchcancel','\x20dB','innerHTML','Horizon','azimuth','enabled','sun','10749weSRpF','azStep','572thqxsk','split','sqrt','fillText','demo','lat','replace','607555JAznAY','value','9440uTFOBx','checked','Noise:\x20','altitude','min','text','div','Observer','closePath','BufferGeometry','beginPath','red','bold\x20','stopPropagation','removeItem','This\x20is\x20a\x20DEMO!\x20Load\x20your\x20CSV\x20file\x20and\x20enter\x20your\x20locator','getUTCMilliseconds','sin','domElement','PerspectiveCamera','filter','Box3','toFixed','3386UEUbuH','94diXfth','getElementById','dec','slice','scale','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<b>Sun</b><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Sun\x20below\x20horizon\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','#000000','data','\x20UTC','demoStatus','createElement','sort','FontLoader','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<b>Moon</b><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Moon\x20below\x20horizon\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','elStep','°<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Noise:\x20','clientX','csvUpload','getSize','degToRad','then','length','style','Scene','<br>','gesturechange','2121CRaLSd','set','Group','Noise:\x20N/A\x20(Outside\x20Dome)','width','Noise'];_0x236c=function(){return _0x55d541;};return _0x236c();}function changeDate(_0x2b136d){const _0x8fa909=_0x41e887;isRealTime&&stopTracking();let _0x173024=datePicker[_0x8fa909(0x1fa)]?new Date(datePicker[_0x8fa909(0x1fa)]):new Date();_0x173024[_0x8fa909(0x235)](_0x173024[_0x8fa909(0x263)]()+_0x2b136d);const _0x3a5271=_0x173024[_0x8fa909(0x28b)](),_0x5c7b5c=String(_0x173024[_0x8fa909(0x297)]()+0x1)[_0x8fa909(0x272)](0x2,'0'),_0x51d96d=String(_0x173024[_0x8fa909(0x263)]())[_0x8fa909(0x272)](0x2,'0');datePicker['value']=_0x3a5271+'-'+_0x5c7b5c+'-'+_0x51d96d,addTrajectories(datePicker[_0x8fa909(0x1fa)]);}timeSlider[_0x41e887(0x273)](_0x41e887(0x2c8),_0x54d6fa=>{const _0x298200=_0x41e887;if(isRealTime)return;_0x54d6fa[_0x298200(0x208)](),changeTime(parseInt(_0x54d6fa['target'][_0x298200(0x1fa)]));}),timeSlider[_0x41e887(0x273)](_0x41e887(0x29a),_0x15fabc=>{_0x15fabc['stopPropagation'](),controls['enabled']=![];}),timeSlider[_0x41e887(0x273)](_0x41e887(0x2a2),_0xad0f41=>{const _0x4fdf1d=_0x41e887;_0xad0f41[_0x4fdf1d(0x208)](),controls['enabled']=!![];}),timeSlider['addEventListener'](_0x41e887(0x2df),_0x5654af=>{const _0x28695=_0x41e887;_0x5654af['stopPropagation'](),controls[_0x28695(0x1ee)]=!![];}),datePicker[_0x41e887(0x273)]('change',_0x5f3c21=>{const _0x3154c8=_0x41e887;isRealTime&&stopTracking();const _0xf30326=_0x5f3c21[_0x3154c8(0x2d0)][_0x3154c8(0x1fa)];_0xf30326&&addTrajectories(_0xf30326);}),prevDateBtn['addEventListener'](_0x41e887(0x258),()=>changeDate(-0x1)),nextDateBtn[_0x41e887(0x273)]('click',()=>changeDate(0x1)),showSunCheckbox[_0x41e887(0x273)]('change',()=>{const _0x5c9d16=_0x41e887;sunTrajectoryGroup[_0x5c9d16(0x281)]=showSunCheckbox[_0x5c9d16(0x1fc)],isRealTime?updateTracking():(updateSunMarker(),updateTimeDisplay()),updateTrackButtonState();}),trackButton[_0x41e887(0x273)](_0x41e887(0x258),()=>{autoTracking?stopTracking():isTrackable()&&startTracking();});function isValidGrid(_0x8601b9){const _0x4eef1a=_0x41e887;if(!_0x8601b9||_0x8601b9[_0x4eef1a(0x228)]<0x4||_0x8601b9[_0x4eef1a(0x228)]>0x6)return![];_0x8601b9=_0x8601b9[_0x4eef1a(0x2aa)]();const _0x4435a2=/^[A-R]{2}[0-9]{2}([A-X]{2})?$/;return _0x4435a2[_0x4eef1a(0x2dc)](_0x8601b9);}function updateDemoStatus(){const _0x33ff97=_0x41e887,_0x1224ae=gridInput[_0x33ff97(0x1fa)]&&isValidGrid(gridInput[_0x33ff97(0x1fa)]),_0x25d032=rawPoints[_0x33ff97(0x228)]>0x0&&!isDemoData;if(_0x1224ae&&_0x25d032)demoStatus[_0x33ff97(0x229)][_0x33ff97(0x2b5)]=_0x33ff97(0x294);else{demoStatus['style'][_0x33ff97(0x2b5)]=_0x33ff97(0x292),demoStatus[_0x33ff97(0x229)][_0x33ff97(0x28f)]='red';if(!_0x1224ae&&!_0x25d032)demoStatus[_0x33ff97(0x2b1)]=_0x33ff97(0x20a);else!_0x1224ae?demoStatus['textContent']=_0x33ff97(0x2cc):demoStatus[_0x33ff97(0x2b1)]=_0x33ff97(0x26a);}}gridInput['addEventListener'](_0x41e887(0x2c8),()=>{const _0x38b455=_0x41e887,_0x430656=gridInput[_0x38b455(0x1fa)],_0x269d95=isValidGrid(_0x430656);gridInput[_0x38b455(0x229)][_0x38b455(0x2bf)]=_0x269d95?_0x38b455(0x28a):_0x38b455(0x206);if(_0x269d95){localStorage[_0x38b455(0x2d4)](_0x38b455(0x287),_0x430656);const _0x520553=datePicker[_0x38b455(0x1fa)]||new Date()['toISOString']()['split']('T')[0x0];addTrajectories(_0x520553),updateTrackButtonState(),isRealTime&&updateTracking();}isRealTime&&stopTracking(),updateDemoStatus();}),dxGridInput[_0x41e887(0x273)]('input',()=>{const _0x5dc15e=_0x41e887,_0x1e56ed=dxGridInput[_0x5dc15e(0x1fa)];if(_0x1e56ed&&isValidGrid(_0x1e56ed))dxGridInput['style'][_0x5dc15e(0x2bf)]=_0x5dc15e(0x28a);else _0x1e56ed?dxGridInput[_0x5dc15e(0x229)][_0x5dc15e(0x2bf)]=_0x5dc15e(0x206):dxGridInput[_0x5dc15e(0x229)][_0x5dc15e(0x2bf)]=_0x5dc15e(0x28a);const _0x109ef7=datePicker[_0x5dc15e(0x1fa)]||new Date()['toISOString']()[_0x5dc15e(0x1f3)]('T')[0x0];addTrajectories(_0x109ef7),isRealTime&&updateTracking();});function maidenheadToLatLon(_0x51364e){const _0x5322a2=_0x41e887;if(!_0x51364e||_0x51364e['length']<0x4)return null;_0x51364e=_0x51364e[_0x5322a2(0x2aa)]();const _0x225dda='A'['charCodeAt'](0x0);let _0x33c033=(_0x51364e[_0x5322a2(0x29e)](0x0)-_0x225dda)*0x14-0xb4,_0xe21ea1=(_0x51364e[_0x5322a2(0x29e)](0x1)-_0x225dda)*0xa-0x5a;return _0x33c033+=parseInt(_0x51364e[0x2])*0x2,_0xe21ea1+=parseInt(_0x51364e[0x3])*0x1,_0x51364e['length']>=0x6&&(_0x33c033+=(_0x51364e[_0x5322a2(0x29e)](0x4)-_0x225dda)*0x5/0x3c,_0xe21ea1+=(_0x51364e['charCodeAt'](0x5)-_0x225dda)*2.5/0x3c),_0x33c033+=2.5/0x3c,_0xe21ea1+=1.25/0x3c,{'lat':_0xe21ea1,'lon':_0x33c033};}const infoBox=document[_0x41e887(0x21d)](_0x41e887(0x201));infoBox['id']=_0x41e887(0x2a1),document[_0x41e887(0x2c3)]['appendChild'](infoBox);function addAzimuthCompass(){const _0x235baa=_0x41e887,_0x5375c0=1.05,_0x5af596=1.2,_0x2f5f50=new THREE['Group'](),_0x471272=new THREE[(_0x235baa(0x21f))]();_0x471272[_0x235baa(0x251)]('https://threejs.org/examples/fonts/helvetiker_regular.typeface.json',function(_0x59a047){const _0x531bf0=_0x235baa,_0x2053cd=[{'label':'N','az':0x0,'color':0xff0000},{'label':'E','az':0x5a,'color':0xffffff},{'label':'S','az':0xb4,'color':0xffffff},{'label':'W','az':0x10e,'color':0xffffff}];_0x2053cd[_0x531bf0(0x24f)](_0x37b2a9=>{const _0xbd8a7d=_0x531bf0,_0x3aecc5=THREE[_0xbd8a7d(0x23c)][_0xbd8a7d(0x226)](0x168-_0x37b2a9['az']),_0x3a9e63=_0x5af596*Math[_0xbd8a7d(0x20c)](_0x3aecc5),_0x16df08=_0x5af596*Math[_0xbd8a7d(0x29f)](_0x3aecc5),_0x5f8172=0x0,_0x5b3613=new THREE[(_0xbd8a7d(0x264))](_0x37b2a9[_0xbd8a7d(0x236)],{'font':_0x59a047,'size':0.1,'height':0.001}),_0xa6debe=new THREE[(_0xbd8a7d(0x2dd))]({'color':_0x37b2a9[_0xbd8a7d(0x28f)]}),_0x2de3ad=new THREE[(_0xbd8a7d(0x2db))](_0x5b3613,_0xa6debe);_0x2de3ad[_0xbd8a7d(0x2c0)]['set'](_0x3a9e63,_0x5f8172,_0x16df08),_0x2de3ad[_0xbd8a7d(0x27e)](0x0,0x0,0x0),_0x2f5f50[_0xbd8a7d(0x24b)](_0x2de3ad);});const _0x2ba62e=new THREE[(_0x531bf0(0x247))](_0x5375c0-0.002,_0x5375c0+0.002,0x100),_0x404dce=new THREE[(_0x531bf0(0x2dd))]({'color':0xffffff,'side':THREE[_0x531bf0(0x275)],'transparent':!![],'opacity':0.9}),_0x4069a2=new THREE[(_0x531bf0(0x2db))](_0x2ba62e,_0x404dce);_0x4069a2[_0x531bf0(0x255)]['x']=-Math['PI']/0x2,_0x4069a2[_0x531bf0(0x2c0)]['y']=0x0,_0x2f5f50['add'](_0x4069a2);for(let _0x1e3db3=0x0;_0x1e3db3<0x168;_0x1e3db3+=0xa){const _0x3389fd=THREE[_0x531bf0(0x23c)][_0x531bf0(0x226)](0x168-_0x1e3db3),_0x5cc9b7=_0x1e3db3%0x1e===0x0,_0x17f8d3=_0x5375c0+0.02,_0x481871=_0x5375c0-(_0x5cc9b7?0.05:0.02),_0x52e8c3=_0x481871*Math['cos'](_0x3389fd),_0x42d719=_0x481871*Math[_0x531bf0(0x20c)](_0x3389fd),_0x350d2f=_0x17f8d3*Math[_0x531bf0(0x29f)](_0x3389fd),_0x40247c=_0x17f8d3*Math[_0x531bf0(0x20c)](_0x3389fd),_0x4b3514=new THREE[(_0x531bf0(0x204))]()[_0x531bf0(0x23d)]([new THREE[(_0x531bf0(0x2be))](_0x52e8c3,0x0,_0x42d719),new THREE[(_0x531bf0(0x2be))](_0x350d2f,0x0,_0x40247c)]),_0x464cbf=new THREE['LineBasicMaterial']({'color':0xffffff,'transparent':!![],'opacity':_0x5cc9b7?0x1:0.5}),_0x498bff=new THREE[(_0x531bf0(0x2b3))](_0x4b3514,_0x464cbf);_0x2f5f50[_0x531bf0(0x24b)](_0x498bff);if(_0x5cc9b7&&![0x0,0x5a,0xb4,0x10e]['includes'](_0x1e3db3)){const _0x236066=_0x5375c0+0.1,_0x3734eb=_0x236066*Math[_0x531bf0(0x20c)](_0x3389fd),_0x25d3c4=_0x236066*Math[_0x531bf0(0x29f)](_0x3389fd),_0x425dad=new THREE[(_0x531bf0(0x264))](_0x1e3db3[_0x531bf0(0x266)](),{'font':_0x59a047,'size':0.045,'height':0.001}),_0x4c45e1=new THREE[(_0x531bf0(0x2dd))]({'color':0xffffff}),_0x263a3c=new THREE[(_0x531bf0(0x2db))](_0x425dad,_0x4c45e1);_0x263a3c[_0x531bf0(0x2c0)][_0x531bf0(0x22e)](_0x3734eb,0x0,_0x25d3c4),_0x263a3c[_0x531bf0(0x27e)](0x0,0x0,0x0),_0x263a3c[_0x531bf0(0x255)]['y']+=Math['PI'],_0x2f5f50[_0x531bf0(0x24b)](_0x263a3c);}}scene[_0x531bf0(0x24b)](_0x2f5f50);},undefined,_0x3cbded=>{});}function addTrajectories(_0x4110e1){const _0x1d0091=_0x41e887,_0x3bed19=gridInput['value'],_0x133688=dxGridInput[_0x1d0091(0x1fa)],_0x4de385=maidenheadToLatLon(_0x3bed19);let _0x5743c9=null;if(_0x133688&&isValidGrid(_0x133688))_0x5743c9=maidenheadToLatLon(_0x133688),dxGridInput[_0x1d0091(0x229)][_0x1d0091(0x2bf)]=_0x1d0091(0x28a);else _0x133688?dxGridInput['style']['borderColor']=_0x1d0091(0x206):dxGridInput['style'][_0x1d0091(0x2bf)]='#fff';if(!_0x4de385){_0x3bed19&&(gridInput['style'][_0x1d0091(0x2bf)]=_0x1d0091(0x206));moonTrajectoryGroup[_0x1d0091(0x240)](),sunTrajectoryGroup[_0x1d0091(0x240)]();if(moonMarker)scene[_0x1d0091(0x283)](moonMarker);if(sunMarker)scene[_0x1d0091(0x283)](sunMarker);moonMarker=null,sunMarker=null,moonPositions=[],dxMoonPositions=[],sunPositions=[],commonMoonWindow=[],currentTimeIndex=0x0,updateTimeSlider();return;}const _0x42d22f=_0x4de385['lat'],_0xf30f47=_0x4de385[_0x1d0091(0x25c)],_0x356e66=new Astronomy[(_0x1d0091(0x202))](_0x42d22f,_0xf30f47,0x0);let _0x1d6dc3=null;_0x5743c9&&(_0x1d6dc3=new Astronomy['Observer'](_0x5743c9[_0x1d0091(0x1f7)],_0x5743c9[_0x1d0091(0x25c)],0x0));const _0x4613b0=_0x4110e1?new Date(_0x4110e1):new Date(),_0x197fc3=new Date(Date[_0x1d0091(0x256)](_0x4613b0[_0x1d0091(0x28b)](),_0x4613b0[_0x1d0091(0x297)](),_0x4613b0[_0x1d0091(0x263)]())),_0x2fc268=new Date(_0x197fc3[_0x1d0091(0x23e)]()+0x18*0x3c*0x3c*0x3e8);moonTrajectoryGroup[_0x1d0091(0x240)](),sunTrajectoryGroup[_0x1d0091(0x240)]();if(moonMarker)scene[_0x1d0091(0x283)](moonMarker);if(sunMarker)scene['remove'](sunMarker);moonMarker=null,sunMarker=null,moonPositions=[],dxMoonPositions=[],sunPositions=[],commonMoonWindow=[],currentTimeIndex=0x0;let _0x486a91=[],_0x5279f7=[],_0x2cbead=[];const _0x9a5a54=[],_0x1d6b83=[],_0x4386e5=[];let _0x5ea10b=-0x1,_0x1b0f7d=-0x1;for(let _0x28f548=0x0;_0x28f548<0x5a0;_0x28f548+=0xa){const _0x58c64b=new Date(_0x197fc3['getTime']()+_0x28f548*0x3c*0x3e8);if(_0x58c64b>=_0x2fc268)break;const _0x37700a=Astronomy['Equator'](Astronomy['Body'][_0x1d0091(0x249)],_0x58c64b,_0x356e66,!![],![]),_0x3b6980=Astronomy[_0x1d0091(0x1ec)](_0x58c64b,_0x356e66,_0x37700a['ra'],_0x37700a['dec'],_0x1d0091(0x2b4)),_0x274f32=_0x3b6980[_0x1d0091(0x1fe)],_0xee07b1=_0x3b6980[_0x1d0091(0x1ed)],_0x1f4c33=THREE[_0x1d0091(0x23c)][_0x1d0091(0x226)](0x168-_0xee07b1),_0x329e5c=THREE[_0x1d0091(0x23c)]['degToRad'](Math[_0x1d0091(0x276)](_0x274f32,0x0)),_0x4bdefa=0x1,_0x310384=_0x4bdefa*Math[_0x1d0091(0x29f)](_0x329e5c)*Math[_0x1d0091(0x20c)](_0x1f4c33),_0x30c592=_0x4bdefa*Math[_0x1d0091(0x20c)](_0x329e5c),_0x13cf37=_0x4bdefa*Math[_0x1d0091(0x29f)](_0x329e5c)*Math['cos'](_0x1f4c33),_0xf274c3=new THREE['Vector3'](_0x310384,_0x30c592,_0x13cf37);if(_0x274f32>0x0){_0x486a91['push'](_0xf274c3);if(_0x5ea10b===-0x1)_0x5ea10b=_0x28f548/0xa;}else{if(_0x486a91[_0x1d0091(0x228)]>0x1)_0x9a5a54[_0x1d0091(0x23b)](_0x486a91);_0x486a91=[];}moonPositions[_0x1d0091(0x23b)]({'time':_0x58c64b,'position':_0xf274c3,'azimuth':_0xee07b1,'elevation':_0x274f32});let _0x4dac8c=![];if(_0x1d6dc3){const _0x1c683f=Astronomy['Equator'](Astronomy[_0x1d0091(0x27d)]['Moon'],_0x58c64b,_0x1d6dc3,!![],![]),_0x40d1ac=Astronomy[_0x1d0091(0x1ec)](_0x58c64b,_0x1d6dc3,_0x1c683f['ra'],_0x1c683f[_0x1d0091(0x215)],_0x1d0091(0x2b4)),_0x535da3=_0x40d1ac[_0x1d0091(0x1fe)],_0x3dc3f7=_0x40d1ac[_0x1d0091(0x1ed)];_0x535da3>0x0&&_0x274f32>0x0&&(_0x2cbead[_0x1d0091(0x23b)](_0xf274c3),_0x4dac8c=!![]),dxMoonPositions[_0x1d0091(0x23b)]({'time':_0x58c64b,'azimuth':_0x3dc3f7,'elevation':_0x535da3});}if(_0x4dac8c)commonMoonWindow['push']({'time':_0x58c64b,'index':_0x28f548/0xa});else _0x2cbead[_0x1d0091(0x228)]>0x1&&(_0x4386e5['push'](_0x2cbead),_0x2cbead=[]);const _0x44df19=Astronomy[_0x1d0091(0x26d)](Astronomy[_0x1d0091(0x27d)][_0x1d0091(0x279)],_0x58c64b,_0x356e66,!![],![]),_0x54c61f=Astronomy[_0x1d0091(0x1ec)](_0x58c64b,_0x356e66,_0x44df19['ra'],_0x44df19['dec'],_0x1d0091(0x2b4)),_0x4856c8=_0x54c61f['altitude'],_0x1ffaa4=_0x54c61f[_0x1d0091(0x1ed)],_0x5d0e30=THREE[_0x1d0091(0x23c)][_0x1d0091(0x226)](0x168-_0x1ffaa4),_0x12a41e=THREE[_0x1d0091(0x23c)][_0x1d0091(0x226)](Math[_0x1d0091(0x276)](_0x4856c8,0x0)),_0x375be4=_0x4bdefa*Math['cos'](_0x12a41e)*Math[_0x1d0091(0x20c)](_0x5d0e30),_0xedcfae=_0x4bdefa*Math[_0x1d0091(0x20c)](_0x12a41e),_0x574546=_0x4bdefa*Math[_0x1d0091(0x29f)](_0x12a41e)*Math[_0x1d0091(0x29f)](_0x5d0e30),_0x4f8766=new THREE[(_0x1d0091(0x2be))](_0x375be4,_0xedcfae,_0x574546);if(_0x4856c8>0x0){_0x5279f7[_0x1d0091(0x23b)](_0x4f8766);if(_0x1b0f7d===-0x1)_0x1b0f7d=_0x28f548/0xa;}else{if(_0x5279f7[_0x1d0091(0x228)]>0x1)_0x1d6b83[_0x1d0091(0x23b)](_0x5279f7);_0x5279f7=[];}sunPositions[_0x1d0091(0x23b)]({'time':_0x58c64b,'position':_0x4f8766,'azimuth':_0x1ffaa4,'elevation':_0x4856c8});}if(_0x486a91[_0x1d0091(0x228)]>0x1)_0x9a5a54['push'](_0x486a91);if(_0x5279f7[_0x1d0091(0x228)]>0x1)_0x1d6b83['push'](_0x5279f7);if(_0x2cbead[_0x1d0091(0x228)]>0x1)_0x4386e5[_0x1d0091(0x23b)](_0x2cbead);_0x9a5a54['forEach'](_0x1b050a=>{const _0x167f0e=_0x1d0091;if(_0x1b050a['length']<0x2)return;const _0x98d146=new THREE[(_0x167f0e(0x252))](_0x1b050a),_0x5ac420=new THREE[(_0x167f0e(0x238))](_0x98d146,0x40,0.005,0x8,![]),_0x33e8da=new THREE[(_0x167f0e(0x2dd))]({'color':0xffff00}),_0x3fcbe7=new THREE[(_0x167f0e(0x2db))](_0x5ac420,_0x33e8da);_0x3fcbe7[_0x167f0e(0x2d2)]={'isMoonTrajectory':!![]},_0x3fcbe7['scale']['setScalar'](TRAJECTORY_SCALE),moonTrajectoryGroup[_0x167f0e(0x24b)](_0x3fcbe7);}),_0x4386e5['forEach'](_0x2591a5=>{const _0x3fb624=_0x1d0091;if(_0x2591a5[_0x3fb624(0x228)]<0x2)return;const _0x2266ae=new THREE[(_0x3fb624(0x252))](_0x2591a5),_0x2b6d2b=new THREE[(_0x3fb624(0x238))](_0x2266ae,0x40,0.007,0x8,![]),_0x191e80=new THREE[(_0x3fb624(0x2dd))]({'color':0xff00}),_0x2e3e1a=new THREE['Mesh'](_0x2b6d2b,_0x191e80);_0x2e3e1a[_0x3fb624(0x2d2)]={'isCommonMoonTrajectory':!![]},_0x2e3e1a[_0x3fb624(0x217)]['setScalar'](TRAJECTORY_SCALE),moonTrajectoryGroup['add'](_0x2e3e1a);}),_0x1d6b83['forEach'](_0x2a22d2=>{const _0xf58d89=_0x1d0091;if(_0x2a22d2[_0xf58d89(0x228)]<0x2)return;const _0x48ea6b=new THREE[(_0xf58d89(0x252))](_0x2a22d2),_0x3f24bb=new THREE[(_0xf58d89(0x238))](_0x48ea6b,0x40,0.005,0x8,![]),_0x328fcf=new THREE[(_0xf58d89(0x2dd))]({'color':0xffa500}),_0x1b8397=new THREE['Mesh'](_0x3f24bb,_0x328fcf);_0x1b8397[_0xf58d89(0x2d2)]={'isSunTrajectory':!![]},_0x1b8397[_0xf58d89(0x217)][_0xf58d89(0x296)](TRAJECTORY_SCALE),sunTrajectoryGroup[_0xf58d89(0x24b)](_0x1b8397);}),sunTrajectoryGroup[_0x1d0091(0x281)]=showSunCheckbox['checked'];if(_0x5ea10b!==-0x1)currentTimeIndex=_0x5ea10b;else showSunCheckbox[_0x1d0091(0x1fc)]&&_0x1b0f7d!==-0x1?currentTimeIndex=_0x1b0f7d:currentTimeIndex=0x48;updateTimeSlider();}window['addTrajectories']=addTrajectories;function parseCsvData(_0x525221,_0x22b5f7){isRealTime&&stopTracking(),Papa['parse'](_0x525221,{'header':!![],'delimiter':'','skipEmptyLines':!![],'complete':function(_0x5ef157){const _0x2d4da0=_0x4cf7;rawPoints['length']=0x0,spheres[_0x2d4da0(0x24f)](_0x29c0c8=>scene[_0x2d4da0(0x283)](_0x29c0c8)),spheres['length']=0x0,minNoise=Infinity,maxNoise=-Infinity;const _0x3290ea=_0x5ef157['meta'][_0x2d4da0(0x257)],_0x529047=[_0x2d4da0(0x2a3),_0x2d4da0(0x2b9),_0x2d4da0(0x232)],_0x1e3c91=_0x529047[_0x2d4da0(0x28d)](_0x1d2a15=>_0x3290ea[_0x2d4da0(0x284)](_0x1d2a15));if(!_0x1e3c91){demoStatus[_0x2d4da0(0x2b1)]=_0x2d4da0(0x2ac),demoStatus[_0x2d4da0(0x229)][_0x2d4da0(0x28f)]=_0x2d4da0(0x206),demoStatus[_0x2d4da0(0x229)][_0x2d4da0(0x2b5)]=_0x2d4da0(0x292);if(_0x22b5f7!=='demo')localStorage[_0x2d4da0(0x209)](_0x2d4da0(0x2ce));return;}_0x5ef157[_0x2d4da0(0x21a)][_0x2d4da0(0x24f)](_0x7f2b49=>{const _0x2e1477=_0x2d4da0;if(_0x7f2b49[_0x2e1477(0x27c)]!==undefined&&_0x7f2b49[_0x2e1477(0x27c)]!==_0x2e1477(0x2da))return;const _0x146458=parseFloat(_0x7f2b49['Azimuth']?.[_0x2e1477(0x1f8)](',','.')),_0x221d3b=parseFloat(_0x7f2b49[_0x2e1477(0x2b9)]?.[_0x2e1477(0x1f8)](',','.')),_0x4a4a4b=parseFloat(_0x7f2b49[_0x2e1477(0x232)]?.[_0x2e1477(0x1f8)](',','.'));if(isNaN(_0x146458)||isNaN(_0x221d3b)||isNaN(_0x4a4a4b))return;minNoise=Math[_0x2e1477(0x1ff)](minNoise,_0x4a4a4b),maxNoise=Math['max'](maxNoise,_0x4a4a4b),rawPoints['push']({'az':_0x146458,'el':_0x221d3b,'noise':_0x4a4a4b});});if(rawPoints[_0x2d4da0(0x228)]===0x0){demoStatus[_0x2d4da0(0x2b1)]=_0x2d4da0(0x25d),demoStatus[_0x2d4da0(0x229)][_0x2d4da0(0x28f)]=_0x2d4da0(0x206),demoStatus[_0x2d4da0(0x229)]['display']='block';if(_0x22b5f7!==_0x2d4da0(0x1f6))localStorage[_0x2d4da0(0x209)](_0x2d4da0(0x2ce));return;}_0x22b5f7!==_0x2d4da0(0x1f6)?(localStorage[_0x2d4da0(0x2d4)](_0x2d4da0(0x2ce),_0x525221),isDemoData=![]):isDemoData=!![];const _0x471292=calculateStepSizes();azStep=_0x471292[_0x2d4da0(0x1f1)],elStep=_0x471292[_0x2d4da0(0x221)],rawPoints[_0x2d4da0(0x24f)](_0x4577f1=>{const _0x54b200=_0x2d4da0,_0x5cc0fe=THREE['MathUtils']['degToRad'](0x168-_0x4577f1['az']),_0x2bb883=THREE[_0x54b200(0x23c)]['degToRad'](_0x4577f1['el']),_0x7d81fe=0x1,_0x5606a6=_0x7d81fe*Math[_0x54b200(0x29f)](_0x2bb883)*Math['sin'](_0x5cc0fe),_0x216ae1=_0x7d81fe*Math[_0x54b200(0x20c)](_0x2bb883),_0xd5807e=_0x7d81fe*Math['cos'](_0x2bb883)*Math[_0x54b200(0x29f)](_0x5cc0fe),_0x33710f=new THREE[(_0x54b200(0x27b))](0.02,0x8,0x8),_0x41a2b3=new THREE[(_0x54b200(0x2dd))]({'color':getColor(_0x4577f1[_0x54b200(0x2ba)])}),_0x351cd1=new THREE[(_0x54b200(0x2db))](_0x33710f,_0x41a2b3);_0x351cd1[_0x54b200(0x2c0)][_0x54b200(0x22e)](_0x5606a6,_0x216ae1,_0xd5807e),_0x351cd1['userData']={'azimuth':_0x4577f1['az'],'elevation':_0x4577f1['el'],'noise':_0x4577f1['noise']},spheres[_0x54b200(0x23b)](_0x351cd1),scene[_0x54b200(0x24b)](_0x351cd1);});let _0x2903f9=![];if(rawPoints['length']>0x0){const _0x220b46=[...new Set(rawPoints['map'](_0x4c8570=>_0x4c8570['az']))][_0x2d4da0(0x21e)]((_0x5aeffe,_0x4f275c)=>_0x5aeffe-_0x4f275c),_0x20d7a2=[...new Set(rawPoints[_0x2d4da0(0x250)](_0x5daf99=>_0x5daf99['el']))][_0x2d4da0(0x21e)]((_0x711328,_0x594397)=>_0x711328-_0x594397),_0x266728=_0x220b46[_0x220b46[_0x2d4da0(0x228)]-0x1]-_0x220b46[0x0],_0x1af95d=_0x20d7a2[_0x20d7a2['length']-0x1]-_0x20d7a2[0x0];_0x2903f9=_0x266728>0x12c&&_0x1af95d>0x50;}if(!rawPoints[_0x2d4da0(0x228)]||_0x2903f9){const _0x3d9f68=0x2,_0x4da8b8=THREE[_0x2d4da0(0x23c)][_0x2d4da0(0x226)](0xb4),_0x23fe3e=THREE[_0x2d4da0(0x23c)]['degToRad'](0x1e);camera[_0x2d4da0(0x2c0)][_0x2d4da0(0x22e)](_0x3d9f68*Math[_0x2d4da0(0x29f)](_0x23fe3e)*Math[_0x2d4da0(0x20c)](_0x4da8b8),_0x3d9f68*Math['sin'](_0x23fe3e),_0x3d9f68*Math[_0x2d4da0(0x29f)](_0x23fe3e)*Math[_0x2d4da0(0x29f)](_0x4da8b8)),camera[_0x2d4da0(0x27e)](0x0,0x0,0x0),controls[_0x2d4da0(0x2d0)][_0x2d4da0(0x22e)](0x0,0x0,0x0);}else{const _0x17228d=new THREE[(_0x2d4da0(0x210))]();spheres[_0x2d4da0(0x24f)](_0x1589b6=>_0x17228d[_0x2d4da0(0x2de)](_0x1589b6['position']));const _0x437a6c=new THREE[(_0x2d4da0(0x2be))]();_0x17228d[_0x2d4da0(0x2d8)](_0x437a6c);const _0x3f077b=new THREE['Vector3']();_0x17228d[_0x2d4da0(0x225)](_0x3f077b);const _0x2d00af=Math[_0x2d4da0(0x276)](_0x3f077b['x'],_0x3f077b['y'],_0x3f077b['z'])||0x2;let _0x5766bd=new THREE[(_0x2d4da0(0x2be))]();spheres[_0x2d4da0(0x24f)](_0x42e359=>_0x5766bd[_0x2d4da0(0x24b)](_0x42e359[_0x2d4da0(0x2c0)])),_0x5766bd[_0x2d4da0(0x26f)](spheres[_0x2d4da0(0x228)]);const _0x1bee82=_0x5766bd[_0x2d4da0(0x2d7)]()['normalize'](),_0x444489=_0x2d00af*0x2;camera[_0x2d4da0(0x2c0)][_0x2d4da0(0x2c5)](_0x1bee82['clone']()[_0x2d4da0(0x2d9)](_0x444489)),camera[_0x2d4da0(0x27e)](_0x437a6c),controls[_0x2d4da0(0x2d0)]['copy'](_0x437a6c);}controls['update'](),addAzimuthCompass(),updateTimeDisplay(),updateDemoStatus();},'error':function(_0x202838){const _0x19abec=_0x4cf7;demoStatus[_0x19abec(0x2b1)]='Error:\x20Invalid\x20CSV\x20format',demoStatus['style'][_0x19abec(0x28f)]=_0x19abec(0x206),demoStatus[_0x19abec(0x229)][_0x19abec(0x2b5)]=_0x19abec(0x292);if(_0x22b5f7!==_0x19abec(0x1f6))localStorage[_0x19abec(0x209)](_0x19abec(0x2ce));}});}const storedGrid=localStorage[_0x41e887(0x2bc)](_0x41e887(0x287));storedGrid&&isValidGrid(storedGrid)&&(gridInput[_0x41e887(0x1fa)]=storedGrid,gridInput[_0x41e887(0x229)][_0x41e887(0x2bf)]='#fff');const storedCsv=localStorage[_0x41e887(0x2bc)](_0x41e887(0x2ce));storedCsv?parseCsvData(storedCsv,'stored'):fetch('demo.csv')['then'](_0x4710b3=>_0x4710b3[_0x41e887(0x200)]())[_0x41e887(0x227)](_0x1d6140=>parseCsvData(_0x1d6140,_0x41e887(0x1f6)))[_0x41e887(0x2ad)](_0x46a0f4=>{const _0x226795=_0x41e887;console[_0x226795(0x244)](_0x226795(0x2b6),_0x46a0f4);const _0x5f4e0c=0x2,_0x400c3d=THREE[_0x226795(0x23c)][_0x226795(0x226)](0xb4),_0x154907=THREE[_0x226795(0x23c)]['degToRad'](0x1e);camera['position']['set'](_0x5f4e0c*Math[_0x226795(0x29f)](_0x154907)*Math['sin'](_0x400c3d),_0x5f4e0c*Math[_0x226795(0x20c)](_0x154907),_0x5f4e0c*Math[_0x226795(0x29f)](_0x154907)*Math[_0x226795(0x29f)](_0x400c3d)),camera[_0x226795(0x27e)](0x0,0x0,0x0),controls['target'][_0x226795(0x22e)](0x0,0x0,0x0),controls[_0x226795(0x24c)](),addAzimuthCompass(),addTrajectories();});document[_0x41e887(0x214)](_0x41e887(0x224))[_0x41e887(0x273)](_0x41e887(0x269),function(_0x55b096){const _0x542284=_0x41e887,_0x218b5c=_0x55b096[_0x542284(0x2d0)][_0x542284(0x2c6)][0x0];if(!_0x218b5c)return;const _0x37572f=new FileReader();_0x37572f['onload']=function(_0x32fc0c){const _0x29a902=_0x542284,_0x118bdf=_0x32fc0c[_0x29a902(0x2d0)]['result'];parseCsvData(_0x118bdf,_0x29a902(0x25b));},_0x37572f['readAsText'](_0x218b5c);}),window[_0x41e887(0x273)](_0x41e887(0x258),_0x30db7c=>{const _0x99815b=_0x41e887;mouse['x']=_0x30db7c[_0x99815b(0x223)]/window[_0x99815b(0x285)]*0x2-0x1,mouse['y']=-(_0x30db7c['clientY']/window[_0x99815b(0x2bb)])*0x2+0x1,raycaster['setFromCamera'](mouse,camera);const _0x256aa7=raycaster[_0x99815b(0x259)]([...spheres,moonMarker,sunMarker]['filter'](_0x4c0488=>_0x4c0488!==null));if(_0x256aa7[_0x99815b(0x228)]>0x0){const _0x25fb6f=_0x256aa7[0x0][_0x99815b(0x282)];if(_0x25fb6f===moonMarker){if(isRealTime&&currentRealTimeData&&currentRealTimeData[_0x99815b(0x29d)]['el']>0x0){const _0x586f22=currentRealTimeData[_0x99815b(0x29d)],_0x586a34=interpolateNoiseAtPosition(_0x586f22['az'],_0x586f22['el']),_0x10e039=_0x586a34?_0x99815b(0x1fd)+_0x586a34[_0x99815b(0x2ba)][_0x99815b(0x211)](0x2)+'\x20dB':_0x99815b(0x230);infoBox[_0x99815b(0x1eb)]=_0x99815b(0x2c9)+_0x586f22['az'][_0x99815b(0x211)](0x1)+'°\x20El:\x20'+_0x586f22['el'][_0x99815b(0x211)](0x1)+_0x99815b(0x2cf)+_0x10e039+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',infoBox[_0x99815b(0x229)][_0x99815b(0x2b5)]=_0x99815b(0x292);}else{if(!isRealTime&&moonPositions[currentTimeIndex]&&moonPositions[currentTimeIndex][_0x99815b(0x267)]>0x0){const _0x3585e7=moonPositions[currentTimeIndex],_0x49310e=interpolateNoiseAtPosition(_0x3585e7[_0x99815b(0x1ed)],_0x3585e7[_0x99815b(0x267)]),_0x9a1d09=_0x49310e?_0x99815b(0x1fd)+_0x49310e['noise']['toFixed'](0x2)+_0x99815b(0x1ea):_0x99815b(0x230);infoBox[_0x99815b(0x1eb)]=_0x99815b(0x2c9)+_0x3585e7[_0x99815b(0x1ed)]['toFixed'](0x1)+_0x99815b(0x25f)+_0x3585e7['elevation'][_0x99815b(0x211)](0x1)+_0x99815b(0x2cf)+_0x9a1d09+_0x99815b(0x2bd),infoBox[_0x99815b(0x229)][_0x99815b(0x2b5)]='block';}}}else{if(_0x25fb6f===sunMarker&&showSunCheckbox[_0x99815b(0x1fc)]){if(isRealTime&&currentRealTimeData&&currentRealTimeData[_0x99815b(0x1ef)]['el']>0x0){const _0x24d5d8=currentRealTimeData[_0x99815b(0x1ef)];infoBox[_0x99815b(0x1eb)]=_0x99815b(0x2ae)+_0x24d5d8['az'][_0x99815b(0x211)](0x1)+_0x99815b(0x25f)+_0x24d5d8['el'][_0x99815b(0x211)](0x1)+_0x99815b(0x2ca),infoBox[_0x99815b(0x229)][_0x99815b(0x2b5)]=_0x99815b(0x292);}else{if(!isRealTime&&sunPositions[currentTimeIndex]&&sunPositions[currentTimeIndex]['elevation']>0x0){const _0x4b5db2=sunPositions[currentTimeIndex];infoBox[_0x99815b(0x1eb)]=_0x99815b(0x2ae)+_0x4b5db2[_0x99815b(0x1ed)]['toFixed'](0x1)+'°\x20El:\x20'+_0x4b5db2[_0x99815b(0x267)][_0x99815b(0x211)](0x1)+_0x99815b(0x2ca),infoBox[_0x99815b(0x229)][_0x99815b(0x2b5)]='block';}}}else{if(_0x25fb6f[_0x99815b(0x2d2)]?.['noise']!==undefined){const {azimuth:_0x24d7e9,elevation:_0x619ff7,noise:_0xcbe1dd}=_0x25fb6f[_0x99815b(0x2d2)];infoBox[_0x99815b(0x1eb)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<b>Measurement</b><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Az:\x20'+_0x24d7e9[_0x99815b(0x211)](0x1)+'°\x20El:\x20'+_0x619ff7[_0x99815b(0x211)](0x1)+_0x99815b(0x222)+_0xcbe1dd[_0x99815b(0x211)](0x2)+_0x99815b(0x270),infoBox[_0x99815b(0x229)]['display']=_0x99815b(0x292);}}}}else updateInfoBox();}),window[_0x41e887(0x273)](_0x41e887(0x2a2),_0x297810=>{const _0x3f2c40=_0x41e887,_0x5f28f8=_0x297810[_0x3f2c40(0x2c2)][0x0];if(!_0x5f28f8)return;mouse['x']=_0x5f28f8[_0x3f2c40(0x223)]/window['innerWidth']*0x2-0x1,mouse['y']=-(_0x5f28f8[_0x3f2c40(0x2b0)]/window['innerHeight'])*0x2+0x1,raycaster[_0x3f2c40(0x2a6)](mouse,camera);const _0x5d44f6=raycaster[_0x3f2c40(0x259)]([...spheres,moonMarker,sunMarker][_0x3f2c40(0x20f)](_0x419cbf=>_0x419cbf!==null));if(_0x5d44f6[_0x3f2c40(0x228)]>0x0){const _0x50df58=_0x5d44f6[0x0][_0x3f2c40(0x282)];if(_0x50df58===moonMarker){if(isRealTime&&currentRealTimeData&&currentRealTimeData['moon']['el']>0x0){const _0x5f4e07=currentRealTimeData[_0x3f2c40(0x29d)],_0x346ce8=interpolateNoiseAtPosition(_0x5f4e07['az'],_0x5f4e07['el']),_0x18442f=_0x346ce8?_0x3f2c40(0x1fd)+_0x346ce8[_0x3f2c40(0x2ba)][_0x3f2c40(0x211)](0x2)+'\x20dB':_0x3f2c40(0x230);infoBox[_0x3f2c40(0x1eb)]=_0x3f2c40(0x2c9)+_0x5f4e07['az'][_0x3f2c40(0x211)](0x1)+_0x3f2c40(0x25f)+_0x5f4e07['el']['toFixed'](0x1)+_0x3f2c40(0x2cf)+_0x18442f+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',infoBox[_0x3f2c40(0x229)][_0x3f2c40(0x2b5)]=_0x3f2c40(0x292);}else{if(!isRealTime&&moonPositions[currentTimeIndex]&&moonPositions[currentTimeIndex]['elevation']>0x0){const _0x360576=moonPositions[currentTimeIndex],_0x369654=interpolateNoiseAtPosition(_0x360576[_0x3f2c40(0x1ed)],_0x360576['elevation']),_0x235f9c=_0x369654?_0x3f2c40(0x1fd)+_0x369654[_0x3f2c40(0x2ba)][_0x3f2c40(0x211)](0x2)+'\x20dB':_0x3f2c40(0x230);infoBox['innerHTML']=_0x3f2c40(0x2c9)+_0x360576[_0x3f2c40(0x1ed)][_0x3f2c40(0x211)](0x1)+'°\x20El:\x20'+_0x360576[_0x3f2c40(0x267)][_0x3f2c40(0x211)](0x1)+'°<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x235f9c+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',infoBox[_0x3f2c40(0x229)][_0x3f2c40(0x2b5)]=_0x3f2c40(0x292);}}}else{if(_0x50df58===sunMarker&&showSunCheckbox[_0x3f2c40(0x1fc)]){if(isRealTime&&currentRealTimeData&&currentRealTimeData[_0x3f2c40(0x1ef)]['el']>0x0){const _0xd8eca0=currentRealTimeData[_0x3f2c40(0x1ef)];infoBox[_0x3f2c40(0x1eb)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<b>Sun</b><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Az:\x20'+_0xd8eca0['az']['toFixed'](0x1)+_0x3f2c40(0x25f)+_0xd8eca0['el']['toFixed'](0x1)+'°\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',infoBox['style'][_0x3f2c40(0x2b5)]='block';}else{if(!isRealTime&&sunPositions[currentTimeIndex]&&sunPositions[currentTimeIndex]['elevation']>0x0){const _0x476822=sunPositions[currentTimeIndex];infoBox['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<b>Sun</b><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Az:\x20'+_0x476822[_0x3f2c40(0x1ed)]['toFixed'](0x1)+_0x3f2c40(0x25f)+_0x476822[_0x3f2c40(0x267)]['toFixed'](0x1)+_0x3f2c40(0x2ca),infoBox[_0x3f2c40(0x229)][_0x3f2c40(0x2b5)]=_0x3f2c40(0x292);}}}else{if(_0x50df58['userData']?.[_0x3f2c40(0x2ba)]!==undefined){const {azimuth:_0x5c469f,elevation:_0x502e5b,noise:_0x289061}=_0x50df58[_0x3f2c40(0x2d2)];infoBox[_0x3f2c40(0x1eb)]=_0x3f2c40(0x274)+_0x5c469f[_0x3f2c40(0x211)](0x1)+_0x3f2c40(0x25f)+_0x502e5b['toFixed'](0x1)+_0x3f2c40(0x222)+_0x289061[_0x3f2c40(0x211)](0x2)+'\x20dB\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',infoBox[_0x3f2c40(0x229)][_0x3f2c40(0x2b5)]=_0x3f2c40(0x292);}}}}else updateInfoBox();});function animate(){const _0x160bba=_0x41e887;requestAnimationFrame(animate),controls[_0x160bba(0x24c)](),renderer['render'](scene,camera);}animate();const today=new Date(),year=today['getUTCFullYear'](),month=String(today[_0x41e887(0x297)]()+0x1)['padStart'](0x2,'0'),day=String(today[_0x41e887(0x263)]())[_0x41e887(0x272)](0x2,'0');datePicker['value']=year+'-'+month+'-'+day,addTrajectories(),updateTrackButtonState();
        </script>
    </body>
</html>
