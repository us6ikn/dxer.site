<!DOCTYPE html>
<html>
  <head>
    <title>Ham Radio Grid Circle</title>
    <meta charset="utf-8" />
    <style>
      /* Set the map height */
      #map {
        height: 500px;
      }
    </style>
  </head>
  <body>
    <h1>Ham Radio Grid Circle</h1>
    <p>
      Enter your Maidenhead grid locator below and click "Plot" to display a circle on the map representing a range of 13000 km.
    </p>
    <form>
      <label for="grid-locator">Grid Locator:</label>
      <input type="text" id="grid-locator" name="grid-locator" required />
      <input type="button" value="Plot" onclick="plotCircle();" />
    </form>
    <div id="map"></div>
    <script>
      // Calculate the latitude and longitude of the grid locator
      function gridToCoords(gridLocator) {
        var lat1 = (gridLocator.charCodeAt(1) - 65) * 10;
        var lat2 = ((gridLocator.charCodeAt(5) - 97) / 24) + (1 / 48) - 90;
        var lat3 = parseInt(gridLocator.charAt(3));
        var latitude = lat1 + lat3 + lat2;

        var lon1 = ((gridLocator.charCodeAt(0) - 65) * 20);
        var lon2 = parseInt(gridLocator.charAt(2)) * 2;
        var lon3 = ((gridLocator.charCodeAt(4) - 97) / 12) + (1 / 24);
        var longitude = lon1 + lon2 + lon3 - 180;

        return [latitude, longitude];
      }

      function plotCircle() {
        // Get the grid locator value
        var gridLocator = document.getElementById("grid-locator").value.toUpperCase();

        // Calculate the latitude and longitude of the grid locator
        var coords = gridToCoords(gridLocator);
        var latitude = coords[0];
        var longitude = coords[1];

        // Create the map
        var map = new google.maps.Map(document.getElementById("map"), {
          center: { lat: latitude, lng: longitude },
          zoom: 4,
        });

        // Draw the circle
        var circle = new google.maps.Circle({
          strokeColor: "#FF0000",
          strokeOpacity: 0.8,
          strokeWeight: 2,
          fillColor: "#FF0000",
          fillOpacity: 0.35,
          map: map,
          center: { lat: latitude, lng: longitude },
          radius: 13000000, // 13000 km in meters
        });
      }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAPRWRoTRhE5TddxBITIhBcKjdQpz2CXRs"></script>
  </body>
</html>
