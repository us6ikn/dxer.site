<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Moon Circumstances Calculator</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 2rem; }
    input, select { margin: 0.5rem; padding: 0.25rem; }
    .section { margin-bottom: 2rem; }
    table { border-collapse: collapse; margin-top: 1rem; }
    th, td { border: 1px solid #ccc; padding: 0.5rem; }
  </style>
</head>
<body>
  <h1>Moon Circumstances Calculator</h1>

  <div class="section">
    <label>Year: <input type="number" id="year" value="2024"></label>
    <label>Month: <input type="number" id="month" value="11"></label>
    <label>Day: <input type="number" id="day" value="30"></label>
    <label>Hour (UT): <input type="number" id="hour" value="20"></label>
    <label>Minute (UT): <input type="number" id="minute" value="38"></label>
    <label>Longitude (East +): <input type="number" step="0.0001" id="longitude" value="17.6507"></label>
    <label>Latitude (North +): <input type="number" step="0.0001" id="latitude" value="59.8015"></label>
    <button onclick="calculateMoonData()">Calculate</button>
  </div>

  <div id="output" class="section"></div>

  <script>
    function degToRad(deg) { return deg * Math.PI / 180; }
    function radToDeg(rad) { return rad * 180 / Math.PI; }
    function sin(d) { return Math.sin(d); }
    function cos(d) { return Math.cos(d); }
    function tan(d) { return Math.tan(d); }
    function asin(d) { return Math.asin(d); }
    function atan2(y, x) { return Math.atan2(y, x); }

    function calculateMoonData() {
      const y = parseInt(document.getElementById('year').value);
      const m = parseInt(document.getElementById('month').value);
      const d = parseInt(document.getElementById('day').value);
      const h = parseInt(document.getElementById('hour').value);
      const min = parseInt(document.getElementById('minute').value);
      const lon = parseFloat(document.getElementById('longitude').value);
      const lat = parseFloat(document.getElementById('latitude').value);

      const UT = h + min / 60;

      // Julian Day (Meeus method)
      let Y = y;
      let M = m;
      if (M <= 2) { Y -= 1; M += 12; }
      const A = Math.floor(Y / 100);
      const B = 2 - A + Math.floor(A / 4);
      const JD = Math.floor(365.25 * (Y + 4716)) + Math.floor(30.6001 * (M + 1)) + d + (UT / 24) + B - 1524.5;
      const T = (JD - 2451545.0) / 36525;

      // We'll plug in accurate formulas in the next version
      const Bo = "pending";
      const Lo = "pending";
      const Ls = "pending";
      const Bs = "pending";
      const illum = "pending";
      const colong = "pending";
      const paAxis = "pending";
      const paLimb = "pending";
      const ra = "pending";
      const dec = "pending";

      const output = document.getElementById('output');
      output.innerHTML = `
        <h2>Numerical Results</h2>
        <table>
          <tr><th>Parameter</th><th>Value</th></tr>
          <tr><td>Julian Date</td><td>${JD.toFixed(5)}</td></tr>
          <tr><td>Libration in latitude (Bo)</td><td>${Bo}</td></tr>
          <tr><td>Libration in longitude (Lo)</td><td>${Lo}</td></tr>
          <tr><td>Sub solar point (Ls)</td><td>${Ls}</td></tr>
          <tr><td>Sub solar point (Bs)</td><td>${Bs}</td></tr>
          <tr><td>Illuminated Fraction</td><td>${illum}</td></tr>
          <tr><td>Co-longitude of Sun</td><td>${colong}</td></tr>
          <tr><td>PA of Axis</td><td>${paAxis}</td></tr>
          <tr><td>PA of Bright Limb</td><td>${paLimb}</td></tr>
          <tr><td>RA</td><td>${ra}</td></tr>
          <tr><td>Dec</td><td>${dec}</td></tr>
        </table>
      `;
    }
  </script>
</body>
</html>
