<!DOCTYPE html>
<html>
  <head>
    <title>My Webpage</title>
  </head>
  <body>
    <h1>My Webpage</h1>
    <p>Click the button to fetch data from the other website:</p>
    <button onclick="fetchData()">Fetch Data</button>
    <div id="output"></div>
    <script>
      function fetchData() {
        fetch('https://cors-anywhere.herokuapp.com/https://hams.at/alerts')
          .then(response => response.text())
          .then(data => {
            const parser = new DOMParser();
            const html = parser.parseFromString(data, 'text/html');
            const cells = html.querySelectorAll('td');
            let callsign = null;
            let time = null;
            let gridSquare = null;
            let callsignsAndTimesAndGridSquares = [];
            cells.forEach(cell => {
              if (cell.textContent.match(/^[A-Za-z0-9]+$/)) {
                callsign = cell.textContent;
              } else if (cell.textContent.match(/^\d{4}-\d{2}-\d{2}\n\d{2}:\d{2}:\d{2} &ndash; \d{2}:\d{2}:\d{2}$/)) {
                time = cell.textContent;
              } else if (cell.textContent.match(/^[A-Z]{2}\d{2}$/)) {
                gridSquare = cell.textContent;
                callsignsAndTimesAndGridSquares.push({callsign: callsign, time: time, gridSquare: gridSquare});
              }
            });
            const output = document.getElementById('output');
            output.innerHTML = "";
            callsignsAndTimesAndGridSquares.forEach(obj => {
                output.innerHTML += `Callsign: ${obj.callsign}<br>Time: ${obj.time}<br>Grid Square: ${obj.gridSquare}<br><br>`;
            });
          })
          .catch(error => {
            console.error(error);
            const output = document.getElementById('output');
            output.innerHTML = `Error: ${error.message}`;
          });
      }
    </script>
  </body>
</html>
