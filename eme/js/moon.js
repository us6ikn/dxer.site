pi=Math.PI;DEG=pi/180;RAD=180/pi;function sqr(B){return B*B}function Int(B){if(B<0){return(Math.ceil(B))}else{return(Math.floor(B))}}function frac(B){return(B-Math.floor(B))}function Mod(D,C){return(D-Math.floor(D/C)*C)}function Mod2Pi(B){B=Mod(B,2*pi);return(B)}function round100000(B){return(Math.round(100000*B)/100000)}function round10000(B){return(Math.round(10000*B)/10000)}function round1000(B){return(Math.round(1000*B)/1000)}function round100(B){return(Math.round(100*B)/100)}function round10(B){return(Math.round(10*B)/10)}function round1(B){return(Math.round(1*B)/1)}var empty="--";function HHMM(C){if(C==0){return(empty)}m=frac(C)*60;var D=Int(C);if(m>=59.5){D++;m-=60}m=Math.round(m);if(D<10){D="0"+D}D=D+":";if(m<10){D=D+"0"}D=D+m;return(D)}function HHMMSS(C){if(C==0){return(empty)}m=frac(C)*60;var D=Int(C);s=frac(m)*60;m=Int(m);if(s>=59.5){m++;s-=60}if(m>=60){D++;m-=60}s=Math.round(s);if(D<10){D="0"+D}D=D+":";if(m<10){D=D+"0"}D=D+m+":";if(s<10){D=D+"0"}D=D+s;return(D)}function Sign(D){var C=new Array("Widder","Stier","Zwillinge","Krebs","L�we","Jungfrau","Waage","Skorpion","Sch�tze","Steinbock","Wassermann","Fische");return(C[Math.floor(D*RAD/30)])}function CalcJD(D,E,F){jd=2415020.5-64;if(E<=2){F--;E+=12}jd+=Int((F-1900)*365.25);jd+=Int(30.6001*(1+E));return(jd+D)}function GMST(D){var E=frac(D-0.5)*24;D=Math.floor(D-0.5)+0.5;var F=(D-2451545)/36525;T0=6.697374558+F*(2400.051336+F*0.000025862);return(Mod(T0+E*1.002737909,24))}function GMST2UT(F,I){F=Math.floor(F-0.5)+0.5;var J=(F-2451545)/36525;var G=Mod(6.697374558+J*(2400.051336+J*0.000025862),24);var H=0.9972695663*((I-G));return(H)}function GMST2LMST(F,E){var D=Mod(F+RAD*E/15,24);return(D)}function Ecl2Equ(I,J){T=(J-2451545)/36525;eps=(23+(26+21.45/60)/60+T*(-46.815+T*(-0.0006+T*0.00181))/3600)*DEG;var H=Math.cos(eps);var F=Math.sin(eps);var G=Math.sin(I.lon);I.ra=Mod2Pi(Math.atan2((G*H-Math.tan(I.lat)*F),Math.cos(I.lon)));I.dec=Math.asin(Math.sin(I.lat)*H+Math.cos(I.lat)*F*G);return I}function Equ2Altaz(U,R,X,Z){var P=Math.cos(U.dec);var V=Math.sin(U.dec);var D=Z-U.ra;var S=Math.cos(D);var Y=Math.sin(D);var c=Math.cos(X);var d=Math.sin(X);var W=-P*Y;var Q=V*c-P*S*d;U.az=Mod2Pi(Math.atan2(W,Q));U.alt=Math.asin(V*d+P*S*c);return U}function GeoEqu2TopoEqu(W,c,d){var R=Math.cos(W.dec);var X=Math.sin(W.dec);var P=Math.cos(d);var S=Math.sin(d);var O=Math.cos(c.lat);var Q=Math.sin(c.lat);var U=c.radius;var V=W.distance*R*Math.cos(W.ra)-U*O*P;var Y=W.distance*R*Math.sin(W.ra)-U*O*S;var Z=W.distance*X-U*Q;W.distanceTopocentric=Math.sqrt(V*V+Y*Y+Z*Z);W.decTopocentric=Math.asin(Z/W.distanceTopocentric);W.raTopocentric=Mod2Pi(Math.atan2(Y,V));return W}function EquPolar2Cart(G,E,F){var H=new Object();rcd=Math.cos(E)*F;H.x=rcd*Math.cos(G);H.y=rcd*Math.sin(G);H.z=F*Math.sin(E);return(H)}function Observer2EquCart(G,I,F,J){flat=298.257223563;aearth=6378.137;var H=new Object();co=Math.cos(I);si=Math.sin(I);fl=1-1/flat;fl=fl*fl;si=si*si;u=1/Math.sqrt(co*co+fl*si);a=aearth*u+F;b=aearth*fl*u+F;radius=Math.sqrt(a*a*co*co+b*b*si);H.y=Math.acos(a*co/radius);H.x=G;if(I<0){H.y=-H.y}H=EquPolar2Cart(H.x,H.y,radius);x=H.x;y=H.y;rotangle=J/24*2*pi;H.x=x*Math.cos(rotangle)-y*Math.sin(rotangle);H.y=x*Math.sin(rotangle)+y*Math.cos(rotangle);H.radius=radius;H.lon=G;H.lat=I;return(H)}function SunPosition(Q,X,Y){var P=Q-2447891.5;var D=279.403303*DEG;var O=282.768422*DEG;var V=0.016713;var S=149598500;var W=0.533128*DEG;var Z=360*DEG/365.242191*P+D-O;var U=Z+360*DEG/pi*V*Math.sin(Z);var R=new Object();R.lon=Mod2Pi(U+O);R.lat=0;R.anomalyMean=Z;R.distance=(1-sqr(V))/(1+V*Math.cos(U));R.diameter=W/R.distance;R.distance*=S;R.parallax=6378.137/R.distance;R=Ecl2Equ(R,Q);if(X!=null&&Y!=null){R=Equ2Altaz(R,Q,X,Y)}R.sign=Sign(R.lon);return R}function MoonPosition(t,AR,C,AF){var r=AR-2447891.5;var AT=318.351648*DEG;var AB=36.34041*DEG;var v=318.510107*DEG;var AS=5.145396*DEG;var AP=0.0549;var AM=384401;var AO=0.5181*DEG;var AH=0.9507*DEG;var D=13.1763966*DEG*r+AT;var AQ=D-0.1114041*DEG*r-AB;var AA=v-0.0529539*DEG*r;var p=D-t.lon;var AJ=1.2739*DEG*Math.sin(2*p-AQ);var AL=0.1858*DEG*Math.sin(t.anomalyMean);var AG=0.37*DEG*Math.sin(t.anomalyMean);var AD=AQ+AJ-AL-AG;var z=6.2886*DEG*Math.sin(AD);var AI=0.214*DEG*Math.sin(2*AD);var V=D+AJ+z-AL+AI;var AC=0.6583*DEG*Math.sin(2*(V-t.lon));var e=V+AC;var w=AA-0.16*DEG*Math.sin(t.anomalyMean);var AK=new Object();AK.lon=Mod2Pi(w+Math.atan2(Math.sin(e-w)*Math.cos(AS),Math.cos(e-w)));AK.lat=Math.asin(Math.sin(e-w)*Math.sin(AS));AK.orbitLon=e;AK=Ecl2Equ(AK,AR);AK.distance=(1-sqr(AP))/(1+AP*Math.cos(AD+z));AK.diameter=AO/AK.distance;AK.parallax=AH/AK.distance;AK.distance*=AM;if(C!=null&&AF!=null){AK=GeoEqu2TopoEqu(AK,C,AF);AK.raGeocentric=AK.ra;AK.decGeocentric=AK.dec;AK.ra=AK.raTopocentric;AK.dec=AK.decTopocentric;AK=Equ2Altaz(AK,AR,C.lat,AF)}AK.moonAge=Mod2Pi(e-t.lon);AK.phase=0.5*(1-Math.cos(AK.moonAge));var AN=new Array("Neumond","Zunehmende Sichel","Erstes Viertel","Zunehmender Mond","Vollmond","Abnehmender Mond","Letztes Viertel","Abnehmende Sichel","Neumond");var AE=1/29.53*360*DEG;var l=Mod(AK.moonAge,90*DEG);if(l<AE||l>90*DEG-AE){l=2*Math.round(AK.moonAge/(90*DEG))}else{l=2*Math.floor(AK.moonAge/(90*DEG))+1}AK.moonPhase=AN[l];AK.sign=Sign(AK.lon);return(AK)}function Refraction(U){var V=U*RAD;if(V<-2||V>=90){return(0)}var L=1015;var P=10;if(V>15){return(0.00452*L/((273+P)*Math.tan(U)))}var Q=U;var M=0;var R=(L-80)/930;var S=0.0048*(P-10);var O=Q;var D=M;for(i=0;i<3;i++){N=Q+(7.31/(Q+4.4));N=1/Math.tan(N*DEG);M=N*R/(60+S*(N+39));N=Q-O;O=M-D-N;if((N!=0)&&(O!=0)){N=Q-N*(U+M-Q)/O}else{N=U+M}O=Q;D=M;Q=N}return(M)}function GMSTRiseSet(L,H,I,K){var K=(K==null)?0:K;var G=new Object();var J=Math.acos((Math.sin(K)-Math.sin(I)*Math.sin(L.dec))/(Math.cos(I)*Math.cos(L.dec)));G.transit=RAD/15*(+L.ra-H);G.rise=24+RAD/15*(-J+L.ra-H);G.set=RAD/15*(+J+L.ra-H);G.transit=Mod(G.transit,24);G.rise=Mod(G.rise,24);G.set=Mod(G.set,24);return(G)}function InterpolateGMST(G,H,E,F){return((F*24.07*H-G*(E-H))/(F*24.07+H-E))}function RiseSet(X,c,e,W,g,Z,k){var l=0;var k=(k==null)?0:k;if(!k){l=0.5*c.diameter-c.parallax+34/60*DEG}var n=GMSTRiseSet(c,W,g,k);var S=GMSTRiseSet(e,W,g,k);var h=new Object();if(n.transit>S.transit&&Math.abs(n.transit-S.transit)>18){S.transit+=24}if(n.rise>S.rise&&Math.abs(n.rise-S.rise)>18){S.rise+=24}if(n.set>S.set&&Math.abs(n.set-S.set)>18){S.set+=24}var j=GMST(X);var U=j-W*RAD/15*1.002738;if(U<0){U+=24}if(n.transit<U){n.transit+=24;S.transit+=24}if(n.rise<U){n.rise+=24;S.rise+=24}if(n.set<U){n.set+=24;S.set+=24}var Y=0.5*(c.dec+e.dec);var d=Math.acos(Math.sin(g)/Math.cos(Y));var f=Math.asin(Math.sin(l)/Math.sin(d));var V=240*RAD*f/Math.cos(Y)/3600;h.transit=GMST2UT(X,InterpolateGMST(j,n.transit,S.transit,Z));h.rise=GMST2UT(X,InterpolateGMST(j,n.rise,S.rise,Z)-V);h.set=GMST2UT(X,InterpolateGMST(j,n.set,S.set,Z)+V);return(h)}function SunRise(M,L,P,V,X,O){var Q=Math.floor(M-0.5)+0.5;var S=SunPosition(Q+L/24/3600);var U=SunPosition(Q+1+L/24/3600);var R=new Object();var W=new Object();W=RiseSet(Q,S,U,P,V,1);if(!O){if(X>0){if(W.rise>=24-X||W.transit>=24-X||W.set>=24-X){R=SunRise(M+1,L,P,V,X,1);if(W.rise>=24-X){W.rise=R.rise}if(W.transit>=24-X){W.transit=R.transit}if(W.set>=24-X){W.set=R.set}}}else{if(X<0){if(W.rise<-X||W.transit<-X||W.set<-X){R=SunRise(M-1,L,P,V,X,1);if(W.rise<-X){W.rise=R.rise}if(W.transit<-X){W.transit=R.transit}if(W.set<-X){W.set=R.set}}}}W.transit=Mod(W.transit+X,24);W.rise=Mod(W.rise+X,24);W.set=Mod(W.set+X,24);R=RiseSet(Q,S,U,P,V,1,-6*DEG);W.cicilTwilightMorning=Mod(R.rise+X,24);W.cicilTwilightEvening=Mod(R.set+X,24);R=RiseSet(Q,S,U,P,V,1,-12*DEG);W.nauticalTwilightMorning=Mod(R.rise+X,24);W.nauticalTwilightEvening=Mod(R.set+X,24);R=RiseSet(Q,S,U,P,V,1,-18*DEG);W.astronomicalTwilightMorning=Mod(R.rise+X,24);W.astronomicalTwilightEvening=Mod(R.set+X,24)}return(W)}function MoonRise(Q,e,S,Z,d,R){var W=0.5;R=1;var U=Math.floor(Q-0.5)+0.5;var f=SunPosition(U+e/24/3600);var X=MoonPosition(f,U+e/24/3600);var P=SunPosition(U+W+e/24/3600);var Y=MoonPosition(P,U+W+e/24/3600);var V=new Object();
var c=new Object();c=RiseSet(U,X,Y,S,Z,W);if(!R){if(d>0){riseprev=MoonRise(Q-1,e,S,Z,d,1);if(c.transit>=24-d||c.transit<-d){if(riseprev.transit<24-d){c.transit=""}else{c.transit=riseprev.transit}}if(c.rise>=24-d||c.rise<-d){if(riseprev.rise<24-d){c.rise=""}else{c.rise=riseprev.rise}}if(c.set>=24-d||c.set<-d){if(riseprev.set<24-d){c.set=""}else{c.set=riseprev.set}}}else{if(d<0){if(c.rise<-d||c.set<-d||c.transit<-d){V=MoonRise(Q+1,e,S,Z,d,1);if(c.rise<-d){if(V.rise>-d){c.rise=""}else{c.rise=V.rise}}if(c.transit<-d){if(V.transit>-d){c.transit=""}else{c.transit=V.transit}}if(c.set<-d){if(V.set>-d){c.set=""}else{c.set=V.set}}}}}if(c.rise){c.rise=Mod(c.rise+d,24)}if(c.transit){c.transit=Mod(c.transit+d,24)}if(c.set){c.set=Mod(c.set+d,24)}}return(c)}var Tsky={0:230,0.1:230,0.2:240,0.3:250,0.4:260,0.5:265,0.6:270,0.7:275,0.8:280,0.9:285,1:290,1.1:292,1.2:294,1.3:296,1.4:298,1.5:300,1.6:302,1.7:304,1.8:306,1.9:308,2:310,2.1:320,2.2:330,2.3:340,2.4:350,2.5:360,2.6:370,2.7:380,2.8:390,2.9:390,3:390,3.1:380,3.2:370,3.3:360,3.4:350,3.5:350,3.6:350,3.7:350,3.8:350,3.9:360,4:370,4.1:375,4.2:380,4.3:385,4.4:390,4.5:395,4.6:400,4.7:405,4.8:410,4.9:415,5:420,5.1:430,5.2:445,5.3:460,5.4:480,5.5:510,5.6:540,5.7:570,5.8:600,5.9:600,6:600,6.1:580,6.2:560,6.3:540,6.4:520,6.5:500,6.6:480,6.7:460,6.8:440,6.9:420,7:400,7.1:390,7.2:380,7.3:370,7.4:360,7.5:350,7.6:340,7.7:330,7.8:320,7.9:310,8:300,8.1:280,8.2:260,8.3:240,8.4:220,8.5:210,8.6:208,8.7:206,8.8:204,8.9:202,9:200,9.1:200,9.2:200,9.3:200,9.4:200,9.5:200,9.6:205,9.7:205,9.8:205,9.9:205,10:205,10.1:205,10.2:200,10.3:200,10.4:200,10.5:202,10.6:204,10.7:208,10.8:212,10.9:216,11:220,11.1:221,11.2:222,11.3:223,11.4:224,11.5:225,11.6:226,11.7:227,11.8:228,11.9:229,12:230,12.1:245,12.2:260,12.3:275,12.4:290,12.5:305,12.6:320,12.7:320,12.8:320,12.9:315,13:310,13.1:308,13.2:306,13.3:304,13.4:302,13.5:300,13.6:300,13.7:302,13.8:305,13.9:308,14:310,14.1:320,14.2:330,14.3:340,14.4:350,14.5:360,14.6:370,14.7:380,14.8:390,14.9:400,15:410,15.1:425,15.2:440,15.3:455,15.4:470,15.5:485,15.6:490,15.7:505,15.8:520,15.9:530,16:540,16.1:580,16.2:620,16.3:660,16.4:700,16.5:780,16.6:860,16.7:940,16.8:1020,16.9:1100,17:1200,17.1:1500,17.2:1800,17.3:2100,17.4:2400,17.5:2700,17.6:3000,17.7:3100,17.8:3200,17.9:3100,18:3000,18.1:2950,18.2:2900,18.3:2650,18.4:2400,18.5:2150,18.6:1900,18.7:1650,18.8:1400,18.9:1150,19:900,19.1:850,19.2:800,19.3:750,19.4:700,19.5:650,19.6:600,19.7:550,19.8:500,19.9:450,20:400,20.1:380,20.2:360,20.3:340,20.4:320,20.5:320,20.6:320,20.7:320,20.8:320,20.9:320,21:320,21.1:320,21.2:320,21.3:320,21.4:320,21.5:320,21.6:316,21.7:312,21.8:308,21.9:304,22:300,22.1:296,22.2:292,22.3:288,22.4:284,22.5:280,22.6:280,22.7:280,22.8:280,22.9:285,23:285,23.1:285,23.2:280,23.3:280,23.4:275,23.5:270,23.6:260,23.7:250,23.8:240,23.9:230,24:230};function log_10(A){return Math.log(A)/Math.log(10)};